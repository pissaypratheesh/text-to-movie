/*! For license information please see disk-cover.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mixin=e():t.mixin=e()}(this,(()=>(()=>{var t={9:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=9,t.exports=e},8:(t,e,r)=>{"use strict";const{isBrowser:n}=r(6),o={},i={safeRequire(t){try{return r(9)(t)}catch(t){}},nodeRequire:t=>n?null:i.safeRequire(t),isUA:t=>navigator&&navigator.userAgent.toLowerCase().includes(t.toLowerCase()),async getPixels(t,e){const n=r(10);return new Promise(((r,o)=>{n(t,e,((t,e,n)=>{if(t)return o(t);r({pixels:e,frameInfo:n})}))}))},awaitMap(t,e){const r=[];for(let n=0;n<t.length;n++)r.push(e(t[n]));return Promise.all(r)},dmap(t,e,r=[]){const n=Array.isArray(t)?[]:{},o=Array.isArray(t)?t.map(((t,e)=>[e,t])):Object.entries(t);for(const[t,i]of o){const o=[...r,t];n[t]="object"==typeof i?this.dmap(i,e,o):e(i,t,o)}return n},genId:t=>(void 0===o[t]&&(o[t]=1),t+"_"+String(o[t]++)),genUuid:()=>Math.random().toString(36).substr(-8)+Math.random().toString(36).substr(-8),deleteArrayElement(t,e){const r=t.indexOf(e);return r>-1&&t.splice(r,1),t},swapArrayElement(t,e,r){const n="number"==typeof e?e:t.indexOf(e),o="number"==typeof r?r:t.indexOf(r),i=t[n];return t[n]=t[o],t[o]=i,t},isArray2D:t=>!(!t||!t.length)&&Array.isArray(t[0]),deleteUndefined(t){for(let e in t)void 0===t[e]&&delete t[e];return t},destroyObj(t){if("object"==typeof t)for(let e in t)delete t[e]},mergeExclude(t,e={},r=[]){for(let n in e)r.indexOf(n)<0&&void 0!==e[n]&&(t[n]=e[n]);return t},insertSubArray(t,e,r){if(r){t.splice(e,1);for(let n=0;n<r.length;n++)t.splice(e,0,r[0])}},courtship:t=>(t>>=0)%2==0?t:t-1,floor(t,e=2){const r=Math.pow(10,e);return Math.floor(t*r)/r},sleep:t=>new Promise((e=>setTimeout(e,t))),fixFolderPath:t=>t.replace(/\/\//gi,"/"),toHash(t){let e,r,n=0;for(e=0;e<t.length;e++)r=t.charCodeAt(e),n=(n<<5)-n+r,n|=0;return n+""},getErrStack:(t={})=>(t="string"==typeof t?{message:t}:t).message||t.stack||t,storage:{}};t.exports=i},7:(t,e,r)=>{"use strict";const{isBrowser:n,isWebWorker:o}=r(6),{nodeRequire:i,genUuid:a}=r(8),s=i("./node-fetch"),u=r(28),f={},c={};r.g&&(r.g.MIRAP_XHRS=c,r.g.MIRAP_RESP_CACHE=f);const l={async cancel(t){for(const[e,r]of Object.entries(c))t===r._cid&&r.abort();for(const[e,r]of Object.entries(f))t===(await r).cid&&delete f[e]},async getRemote(t,e,r=null){const i=u(t);return f[i]||(f[i]=new Promise((function(i){if(n||o){const n=a(),o=new XMLHttpRequest;o.addEventListener("load",(()=>{delete c[n];const t=o.getResponseHeader("Content-Type");i({data:o.response,type:t,cid:e})})),o.addEventListener("error",(r=>{delete c[n],i({url:t,cid:e})})),o.addEventListener("abort",(r=>{delete c[n],i({url:t,cid:e})})),o.addEventListener("progress",(t=>{r&&r(t)})),o.open("get",t),o.responseType="blob",o._cid=e,o.send(),c[n]=o}else s(t).then((t=>{const e=t.headers.get("content-type");i({data:t,type:e})}))}))),f[i]}};t.exports=l},5:(t,e,r)=>{"use strict";const{isWebWorker:n}=r(6),{getRemote:o}=r(7);t.exports=class{constructor(){this.MAX_TIME=99999,this.msgs={},n?this.initWebWorker():this.initNode()}initWebWorker(){this.canvas=new OffscreenCanvas(1,1),this.drawCanvas=new OffscreenCanvas(1,1),this.ctx=this.drawCanvas.getContext("2d"),this.klassHolder={},this.createCanvas=(t,e)=>new OffscreenCanvas(t,e)}initNode(){const{nodeRequire:t}=r(8),{createCanvas:e,Canvas:n,Image:o}=t("../../inkpaint/lib/index");this.canvas=e(1,1),this.drawCanvas=e(1,1),this.ctx=this.drawCanvas.getContext("2d"),this.klassHolder={Canvas:n,Image:o},this.createCanvas=e}async update(t){}async getRemoteData(t,e=!0){try{const r=await o(t,"cid"),n=await r.data.text();return e?JSON.parse(n):n}catch(t){return null}}async init(t){return this.conf=t,{width:1,height:1,duration:1}}resize(t,e){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.drawCanvas.width=t,this.drawCanvas.height=e}async render(t,e){}async draw({time:t,delta:e}){await this.render(t,e);const{width:r,height:o}=this;return this.ctx.clearRect(0,0,r,o),this.ctx.drawImage(this.canvas,0,0,r,o),n?this.drawCanvas.transferToImageBitmap():this.drawCanvas}start(){addEventListener("message",(async t=>{if("object"!=typeof t.data)return postMessage({err:"invalid request!"});const e=t.data.msgid;if(this.msgs[e])return(0,this.msgs[e])(t.data.resp),void delete this.msgs[e];if(!t.data.method)return postMessage({err:"invalid request!",msgid:e});const r=this[t.data.method];if(!r||"function"!=typeof r)return postMessage({err:`method not found: ${t.data.method}`,msgid:e});const n=await r.call(this,t.data);postMessage({resp:n,msgid:e})}))}async getImageData(t){return await this.exec("getImageData",{src:t})}exec(t,e,r=1e4){return new Promise((async(o,i)=>{if(n){const n=this.genUuid();this.msgs[n]=t=>{if("object"==typeof t&&t.err)return i(t);o(t)},postMessage({...e,method:t,msgid:n}),setTimeout((()=>{delete this.msgs[n],i()}),r)}else this.execCallback&&o(await this.execCallback(t,e))}))}genUuid(){return Math.random().toString(36).substr(-8)+Math.random().toString(36).substr(-8)}destroy(){this.ctx=null,this.drawCanvas=null,this.canvas=null,this.conf=null}}},571:(t,e,r)=>{const n=r(5),{getRemote:o}=r(7),{isWebWorker:i}=r(6),a=r(572);class s extends n{async init(t){await super.init(t);try{this.meta=await this.readMeta(t.src)}catch(t){console.log("e",t)}if(this.speed=this.conf.speed||1,this.meta?.image?.width&&this.meta?.image?.height){const{width:t,height:e}=this.meta.image,r=Math.min(t,e);this.resize(r,r);const n=this.createCanvas(r,r),o=n.getContext("2d");let i=r/2;o.beginPath(),o.arc(i,i,i,0,2*Math.PI,!1),o.closePath(),o.clip();const a=this.createCanvas(r,r),s=a.getContext("2d"),u=(this.width-t)/2,f=(this.height-e)/2;s.putImageData(this.meta.image,u,f),o.drawImage(a,0,0),this.coverCanvas=n}return{width:this.width,height:this.height,duration:this.MAX_TIME}}async update(t){void 0!==t?.speed&&(this.speed=t.speed)}async readMeta(t){return new Promise(((e,r)=>{a.read(t,{onSuccess:async t=>{const{title:r,artist:n,album:o}=t.tags,i={title:r,artist:n,album:o},a=t.tags.picture;if(a){let t="";for(let e=0;e<a.data.length;e++)t+=String.fromCharCode(a.data[e]);const e="data:"+a.format+";base64,"+btoa(t);i.image=await this.getImageData(e)}e(i)},onError:function(t){console.log(":(",t.type,t.info),r(t)}})}))}render(t,e){if(!this.coverCanvas)return;const r=this.canvas.getContext("2d");r.save();const n=this.width/2;r.translate(n,n),r.rotate(t*this.speed),r.translate(-n,-n),r.drawImage(this.coverCanvas,0,0),r.restore()}}i&&(new s).start(),t.exports=s},17:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,i=s(t),a=i[0],u=i[1],f=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,u)),c=0,l=u>0?a-4:a;for(r=0;r<l;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],f[c++]=e>>16&255,f[c++]=e>>8&255,f[c++]=255&e;return 2===u&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,f[c++]=255&e),1===u&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,f[c++]=e>>8&255,f[c++]=255&e),f},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=16383,s=0,f=n-o;s<f;s+=a)i.push(u(t,s,s+a>f?f:s+a));return 1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},6:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n="undefined"!=typeof window&&void 0!==window.document,o="object"===("undefined"==typeof self?"undefined":r(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,i="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;e.isBrowser=n,e.isWebWorker=o,e.isNode=i,e.isJsDom=function(){return"undefined"!=typeof window&&"nodejs"===window.name||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}},16:(t,e,r)=>{"use strict";const n=r(17),o=r(18),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return f(t,e,r)}function f(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|g(t,e);let n=s(r);const o=n.write(t,e);return o!==r&&(n=n.slice(0,o)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return p(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return p(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,r);const o=function(t){if(u.isBuffer(t)){const e=0|d(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||K(t.length)?s(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),s(t<0?0:0|d(t))}function h(t){const e=t.length<0?0:0|d(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function p(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function d(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(o)return n?-1:q(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,o){let i,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function f(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let n=-1;for(i=r;i<s;i++)if(f(t,i)===f(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===u)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){let r=!0;for(let n=0;n<u;n++)if(f(t,i+n)!==f(e,n)){r=!1;break}if(r)return i}return-1}function w(t,e,r,n){r=Number(r)||0;const o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=e.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(e.substr(2*a,2),16);if(K(n))return a;t[r+a]=n}return a}function A(t,e,r,n){return $(q(e,t.length-r),t,r,n)}function _(t,e,r,n){return $(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return $(V(e),t,r,n)}function R(t,e,r,n){return $(function(t,e){let r,n,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);const n=[];let o=e;for(;o<r;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=r){let r,n,s,u;switch(a){case 1:e<128&&(i=e);break;case 2:r=t[o+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(i=u));break;case 3:r=t[o+1],n=t[o+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=t[o+1],n=t[o+2],s=t[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(t){const e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,r){return f(t,e,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,r){return function(t,e,r){return c(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},u.allocUnsafe=function(t){return l(t)},u.allocUnsafeSlow=function(t){return l(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=u.allocUnsafe(e);let o=0;for(r=0;r<t.length;++r){let e=t[r];if(Y(e,Uint8Array))o+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,o)):Uint8Array.prototype.set.call(n,e,o);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,o)}o+=e.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(t,e,r,n,o){if(Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const s=Math.min(i,a),f=this.slice(n,o),c=t.slice(e,r);for(let t=0;t<s;++t)if(f[t]!==c[t]){i=f[t],a=c[t];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return A(this,t,e,r);case"ascii":case"latin1":case"binary":return _(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function C(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function B(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function O(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=e;n<r;++n)o+=J[t[n]];return o}function I(t,e,r){const n=t.slice(e,r);let o="";for(let t=0;t<n.length-1;t+=2)o+=String.fromCharCode(n[t]+256*n[t+1]);return o}function x(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,o){W(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function L(t,e,r,n,o){W(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i>>=8,t[r+6]=i,i>>=8,t[r+5]=i,i>>=8,t[r+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function M(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,i){return e=+e,r>>>=0,i||M(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function U(t,e,r,n,i){return e=+e,r>>>=0,i||M(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);let n=this[t+--e],o=1;for(;e>0&&(o*=256);)n+=this[t+--e]*o;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||x(t,e,this.length);let n=e,o=1,i=this[t+--n];for(;n>0&&(o*=256);)i+=this[t+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||x(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){t>>>=0,e||x(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||G(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||x(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||x(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||x(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||x(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||j(this,t,e,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||j(this,t,e,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Q((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Q((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,t,e,r,n-1,-n)}let o=0,i=1,a=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,t,e,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Q((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Q((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const o=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{const i=u.isBuffer(t)?t:u.from(t,n),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=i[o%a]}return this};const F={};function z(t,e,r){F[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function N(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function W(t,e,r,n,o,i){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new F.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,r){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||G(e,t.length-(r+1))}(n,o,i)}function H(t,e){if("number"!=typeof t)throw new F.ERR_INVALID_ARG_TYPE(e,"number",t)}function G(t,e,r){if(Math.floor(t)!==t)throw H(t,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=N(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=N(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n}),RangeError);const X=/[^+/0-9A-Za-z-_]/g;function q(t,e){let r;e=e||1/0;const n=t.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function V(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,r,n){let o;for(o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)e[n+o]=t[r]+t[o]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},30:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},29:t=>{var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?r.push(e.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(n))>>>6-2*o);return r}},t.exports=r},21:(t,e,r)=>{"use strict";var n=r(22);function o(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(t){var e=new o;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var i=0;i<r.length;++i){var a=r[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===a){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,n(e)}},23:(t,e,r)=>{"use strict";var n=r(24);function o(t,e,r){var n,o,i=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],f=[],c=0,l=0;for(n=0;n<i;++n)f.push(["i",n,"=0"].join(""));for(o=0;o<a;++o)for(n=0;n<i;++n)l=c,c=t[n],0===n?f.push(["d",o,"s",n,"=t",o,"p",c].join("")):f.push(["d",o,"s",n,"=(t",o,"p",c,"-s",l,"*t",o,"p",l,")"].join(""));for(f.length>0&&u.push("var "+f.join(",")),n=i-1;n>=0;--n)c=t[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<i;++n){for(l=c,c=t[n],o=0;o<a;++o)u.push(["p",o,"+=d",o,"s",n].join(""));s&&(n>0&&u.push(["index[",l,"]-=s",l].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function i(t,e,r){for(var n=t.body,o=[],i=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),f="",c=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var l=e.offsetArgIndex.indexOf(a);c=e.offsetArgs[l].array,f="+q"+l;case"array":f="p"+c+f;var h="l"+a,p="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(o.push(["var ",h,"=",p,".get(",f,")"].join("")),n=n.replace(u,h),i.push([p,".set(",f,",",h,")"].join(""))):n=n.replace(u,[p,".get(",f,")"].join("")):n=n.replace(u,[p,"[",f,"]"].join("")):"generic"===r[c]?(o.push(["var ",h,"=",p,".get(",f,")"].join("")),n=n.replace(u,h),s.lvalue&&i.push([p,".set(",f,",",h,")"].join(""))):(o.push(["var ",h,"=",p,"[",f,"]"].join("")),n=n.replace(u,h),s.lvalue&&i.push([p,"[",f,"]=",h].join("")));else{for(var d=[s.name],g=[f],y=0;y<Math.abs(e.arrayBlockIndices[c]);y++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(y+1)+"*t"+c+"b"+y);if(u=new RegExp(d.join(""),"g"),f=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",f,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[o.join("\n"),n,i.join("\n")].join("\n").trim()}function a(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var o=t[n],i=o.match(/\d+/);i=i?i[0]:"",0===o.charAt(0)?e[n]="u"+o.charAt(1)+i:e[n]=o.charAt(0)+i,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}t.exports=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),u=new Array(t.arrayArgs.length),f=0;f<t.arrayArgs.length;++f)u[f]=e[2*f],s[f]=e[2*f+1];var c=[],l=[],h=[],p=[],d=[];for(f=0;f<t.arrayArgs.length;++f){t.arrayBlockIndices[f]<0?(h.push(0),p.push(r),c.push(r),l.push(r+t.arrayBlockIndices[f])):(h.push(t.arrayBlockIndices[f]),p.push(t.arrayBlockIndices[f]+r),c.push(0),l.push(t.arrayBlockIndices[f]));for(var g=[],y=0;y<s[f].length;y++)h[f]<=s[f][y]&&s[f][y]<p[f]&&g.push(s[f][y]-h[f]);d.push(g)}var v=["SS"],b=["'use strict'"],m=[];for(y=0;y<r;++y)m.push(["s",y,"=SS[",y,"]"].join(""));for(f=0;f<t.arrayArgs.length;++f){for(v.push("a"+f),v.push("t"+f),v.push("p"+f),y=0;y<r;++y)m.push(["t",f,"p",y,"=t",f,"[",h[f]+y,"]"].join(""));for(y=0;y<Math.abs(t.arrayBlockIndices[f]);++y)m.push(["t",f,"b",y,"=t",f,"[",c[f]+y,"]"].join(""))}for(f=0;f<t.scalarArgs.length;++f)v.push("Y"+f);if(t.shapeArgs.length>0&&m.push("shape=SS.slice(0)"),t.indexArgs.length>0){var w=new Array(r);for(f=0;f<r;++f)w[f]="0";m.push(["index=[",w.join(","),"]"].join(""))}for(f=0;f<t.offsetArgs.length;++f){var A=t.offsetArgs[f],_=[];for(y=0;y<A.offset.length;++y)0!==A.offset[y]&&(1===A.offset[y]?_.push(["t",A.array,"p",y].join("")):_.push([A.offset[y],"*t",A.array,"p",y].join("")));0===_.length?m.push("q"+f+"=0"):m.push(["q",f,"=",_.join("+")].join(""))}var S=n([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((m=m.concat(S)).length>0&&b.push("var "+m.join(",")),f=0;f<t.arrayArgs.length;++f)b.push("p"+f+"|=0");t.pre.body.length>3&&b.push(i(t.pre,t,u));var R=i(t.body,t,u),T=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(d);T<r?b.push(function(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,f=[],c=0;c<a;++c)f.push(["var offset",c,"=p",c].join(""));for(c=t;c<i;++c)f.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),f.push(["if(j",c,"<",s,"){"].join("")),f.push(["s",e[c],"=j",c].join("")),f.push(["j",c,"=0"].join("")),f.push(["}else{s",e[c],"=",s].join("")),f.push(["j",c,"-=",s,"}"].join("")),u&&f.push(["index[",e[c],"]=j",c].join(""));for(c=0;c<a;++c){for(var l=["offset"+c],h=t;h<i;++h)l.push(["j",h,"*t",c,"p",e[h]].join(""));f.push(["p",c,"=(",l.join("+"),")"].join(""))}for(f.push(o(e,r,n)),c=t;c<i;++c)f.push("}");return f.join("\n")}(T,d[0],t,R)):b.push(o(d[0],t,R)),t.post.body.length>3&&b.push(i(t.post,t,u)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+b.join("\n")+"\n----------");var k=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",T,a(u)].join("");return new Function(["function ",k,"(",v.join(","),"){",b.join("\n"),"} return ",k].join(""))()}},22:(t,e,r)=>{"use strict";var n=r(23);t.exports=function(t){var e=["'use strict'","var CACHED={}"],r=[],o=t.funcName+"_cwise_thunk";e.push(["return function ",o,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],f=[],c=0;c<t.arrayArgs.length;++c){var l=t.arrayArgs[c];r.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),i.push("t"+l),i.push("r"+l),a.push("t"+l),a.push("r"+l+".join()"),s.push("array"+l+".data"),s.push("array"+l+".stride"),s.push("array"+l+".offset|0"),c>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),f.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),c=0;c<t.scalarArgs.length;++c)s.push("scalar"+t.scalarArgs[c]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(n.bind(void 0,t))}},27:t=>{t.exports=function(t){if(!/^data\:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');var e=(t=t.replace(/\r?\n/g,"")).indexOf(",");if(-1===e||e<=4)throw new TypeError("malformed data: URI");for(var r=t.substring(5,e).split(";"),n=!1,o="US-ASCII",i=0;i<r.length;i++)"base64"==r[i]?n=!0:0==r[i].indexOf("charset=")&&(o=r[i].substring(8));var a=unescape(t.substring(e+1)),s=new Buffer(a,n?"base64":"ascii");return s.type=r[0]||"text/plain",s.charset=o,s}},10:(t,e,r)=>{"use strict";var n=r(11),o=r(12),i=r(15).GifReader,a=r(16).Buffer,s=(r(19),r(25),r(27));function u(t,e){var r;try{r=new i(t)}catch(t){return void e(t)}if(r.numFrames()>0){var n=[r.numFrames(),r.height,r.width,4],a=new Uint8Array(n[0]*n[1]*n[2]*n[3]),s=o(a,n),u=[];try{for(var f=0;f<r.numFrames();++f)r.decodeAndBlitFrameRGBA(f,a.subarray(s.index(f,0,0,0),s.index(f+1,0,0,0))),u.push(r.frameInfo(f))}catch(t){return void e(t)}e(null,s.transpose(0,2,1),u)}else{n=[r.height,r.width,4],a=new Uint8Array(n[0]*n[1]*n[2]),s=o(a,n);try{r.decodeAndBlitFrameRGBA(0,a)}catch(t){return void e(t)}e(null,s.transpose(1,0))}}t.exports=function(t,e,r){r||(r=e,e="");var i=n.extname(t);".GIF"===(e||i.toUpperCase())?function(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("application/binary"),r.onerror=function(t){e(t)},r.onload=function(){4===r.readyState&&u(new Uint8Array(r.response),e)},r.send()}(t,r):(a.isBuffer(t)&&(t="data:"+e+";base64,"+t.toString("base64")),0===t.indexOf("data:image/gif;")?function(t,e){process.nextTick((function(){try{var r=s(t);r?u(function(t){if(void 0===t[0]){for(var e=t.length,r=new Uint8Array(e),n=0;n<e;++n)r[n]=t.get(n);return r}return new Uint8Array(t)}(r),e):e(new Error("Error parsing data URI"))}catch(t){e(t)}}))}(t,r):function(t,e){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var t=document.createElement("canvas");t.width=r.width,t.height=r.height;var n=t.getContext("2d");n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);e(null,o(new Uint8Array(i.data),[r.width,r.height,4],[4,4*r.width,1],0))},r.onerror=function(t){e(t)},r.src=t}(t,r))}},18:(t,e)=>{e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,f=u>>1,c=-7,l=r?o-1:0,h=r?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+t[e+l],l+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=f}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,u,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=c?(s=0,a=c):a+l>=1?(s=(e*u-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,f+=o;f>0;t[r+p]=255&a,p+=d,a/=256,f-=8);t[r+p-d]|=128*g}},13:t=>{"use strict";t.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},14:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},579:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(p,t);var e,r,f,c,l,h=(c=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(c);if(l){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),u(a(e=h.call(this)),"_array",void 0),u(a(e),"_size",void 0),e._array=t,e._size=t.length,e._isInitialized=!0,e}return e=p,f=[{key:"canReadFile",value:function(t){return Array.isArray(t)||"function"==typeof Buffer&&Buffer.isBuffer(t)}}],(r=[{key:"init",value:function(t){setTimeout(t.onSuccess,0)}},{key:"loadRange",value:function(t,e){setTimeout(e.onSuccess,0)}},{key:"getByteAt",value:function(t){if(t>=this._array.length)throw new Error("Offset "+t+" hasn't been loaded yet.");return this._array[t]}}])&&o(e.prototype,r),f&&o(e,f),p}(r(573));t.exports=f},578:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=r(576),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(d,t);var e,r,c,l,h,p=(l=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(l);if(h){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}(this,t)});function d(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),u(a(e=p.call(this)),"_blob",void 0),u(a(e),"_fileData",void 0),e._blob=t,e._fileData=new f,e}return e=d,c=[{key:"canReadFile",value:function(t){return"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File}}],(r=[{key:"_init",value:function(t){this._size=this._blob.size,setTimeout(t.onSuccess,1)}},{key:"loadRange",value:function(t,e){var r=this,n=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,t[0],t[1]+1),o=new FileReader;o.onloadend=function(n){var i=new Uint8Array(o.result);r._fileData.addData(t[0],i),e.onSuccess()},o.onerror=o.onabort=function(t){e.onError&&e.onError({type:"blob",info:o.error})},o.readAsArrayBuffer(n)}},{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}}])&&o(e.prototype,r),c&&o(e,c),d}(r(573));t.exports=c},576:t=>{"use strict";function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=-1,n=function(){function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(e="_fileData")in this?Object.defineProperty(this,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[e]=r,this._fileData=[]}var n,o,i;return n=t,i=[{key:"NOT_FOUND",get:function(){return r}}],(o=[{key:"addData",value:function(t,e){var n=t+e.length-1,o=this._getChunkRange(t,n);if(o.startIx===r)this._fileData.splice(o.insertIx||0,0,{offset:t,data:e});else{var i=this._fileData[o.startIx],a=this._fileData[o.endIx],s=t>i.offset,u=n<a.offset+a.data.length-1,f={offset:Math.min(t,i.offset),data:e};if(s){var c=this._sliceData(i.data,0,t-i.offset);f.data=this._concatData(c,e)}u&&(c=this._sliceData(f.data,0,a.offset-f.offset),f.data=this._concatData(c,a.data)),this._fileData.splice(o.startIx,o.endIx-o.startIx+1,f)}}},{key:"_concatData",value:function(t,e){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t)){var r=new t.constructor(t.length+e.length);return r.set(t,0),r.set(e,t.length),r}return t.concat(e)}},{key:"_sliceData",value:function(t,e,r){return t.slice?t.slice(e,r):t.subarray(e,r)}},{key:"_getChunkRange",value:function(t,e){for(var n=r,o=r,i=0,a=0;a<this._fileData.length;i=++a){var s=(u=this._fileData[a].offset)+this._fileData[a].data.length;if(e<u-1)break;if(t<=s+1&&e>=u-1){n=a;break}}if(n===r)return{startIx:r,endIx:r,insertIx:i};for(a=n;a<this._fileData.length;a++){var u;if(e>=(u=this._fileData[a].offset)-1&&(o=a),e<=(s=u+this._fileData[a].data.length)+1)break}return o===r&&(o=n),{startIx:n,endIx:o}}},{key:"hasDataRange",value:function(t,e){for(var r=0;r<this._fileData.length;r++){var n=this._fileData[r];if(e<n.offset)return!1;if(t>=n.offset&&e<n.offset+n.data.length)return!0}return!1}},{key:"getByteAt",value:function(t){for(var e,r=0;r<this._fileData.length;r++){var n=this._fileData[r].offset,o=n+this._fileData[r].data.length-1;if(t>=n&&t<=o){e=this._fileData[r];break}}if(e)return e.data[t-e.offset];throw new Error("Offset "+t+" hasn't been loaded yet.")}}])&&e(n.prototype,o),i&&e(n,i),t}();t.exports=n},585:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=r(580),c=[4,132],l=[6,134],h=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"],p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(y,t);var e,r,f,p,d,g=(p=y,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(p);if(d){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}(this,t)});function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(a(t=g.call.apply(g,[this].concat(r))),"_commentOffset",void 0),u(a(t),"_pictureOffset",void 0),t}return e=y,f=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(t){return"fLaC"===String.fromCharCode.apply(String,t.slice(0,4))}}],(r=[{key:"_loadData",value:function(t,e){var r=this;t.loadRange([4,7],{onSuccess:function(){r._loadBlock(t,4,e)}})}},{key:"_loadBlock",value:function(t,e,r){var n=this,o=t.getByteAt(e),i=t.getInteger24At(e+1,!0);if(-1!==c.indexOf(o)){var a=e+4;t.loadRange([a,a+i],{onSuccess:function(){n._commentOffset=a,n._nextBlock(t,e,o,i,r)}})}else-1!==l.indexOf(o)?(a=e+4,t.loadRange([a,a+i],{onSuccess:function(){n._pictureOffset=a,n._nextBlock(t,e,o,i,r)}})):n._nextBlock(t,e,o,i,r)}},{key:"_nextBlock",value:function(t,e,r,n,o){var i=this;r>127?i._commentOffset?o.onSuccess():o.onError({type:"loadData",info:"Comment block could not be found."}):t.loadRange([e+4+n,e+4+4+n],{onSuccess:function(){i._loadBlock(t,e+4+n,o)}})}},{key:"_parseData",value:function(t,e){for(var r,n,o,i,a,s,u=t.getLongAt(this._commentOffset,!1)+(this._commentOffset+4),f=t.getLongAt(u,!1),c=u+4,l=0;l<f;l++){var p=t.getLongAt(c,!1),d=t.getStringWithCharsetAt(c+4,p,"utf-8").toString(),g=d.indexOf("="),y=[d.slice(0,g),d.slice(g+1)];switch(y[0].toUpperCase()){case"TITLE":r=y[1];break;case"ARTIST":n=y[1];break;case"ALBUM":o=y[1];break;case"TRACKNUMBER":i=y[1];break;case"GENRE":a=y[1]}c+=4+p}if(this._pictureOffset){var v=t.getLongAt(this._pictureOffset,!0),b=this._pictureOffset+4,m=t.getLongAt(b,!0),w=b+4,A=t.getStringAt(w,m),_=w+m,S=t.getLongAt(_,!0),R=_+4,T=t.getStringWithCharsetAt(R,S,"utf-8").toString(),k=R+S+16,E=t.getLongAt(k,!0),C=k+4,B=t.getBytesAt(C,E,!0);s={format:A,type:h[v],description:T,data:B}}return{type:"FLAC",version:"1",tags:{title:r,artist:n,album:o,track:i,genre:a,picture:s}}}}])&&o(e.prototype,r),f&&o(e,f),y}(f);t.exports=p},581:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var s=r(580),u=(r(573),function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(h,t);var e,r,s,u,c,l=(u=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(u);if(c){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,t)});function h(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),l.apply(this,arguments)}return e=h,s=[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(t){return"TAG"===String.fromCharCode.apply(String,t.slice(0,3))}}],(r=[{key:"_loadData",value:function(t,e){var r=t.getSize();t.loadRange([r-128,r-1],e)}},{key:"_parseData",value:function(t,e){var r=t.getSize()-128,n=t.getStringWithCharsetAt(r+3,30).toString(),o=t.getStringWithCharsetAt(r+33,30).toString(),i=t.getStringWithCharsetAt(r+63,30).toString(),a=t.getStringWithCharsetAt(r+93,4).toString(),s=t.getByteAt(r+97+28),u=t.getByteAt(r+97+29);if(0==s&&0!=u)var c="1.1",l=t.getStringWithCharsetAt(r+97,28).toString();else c="1.0",l=t.getStringWithCharsetAt(r+97,30).toString(),u=0;var h=t.getByteAt(r+97+30);if(h<255)var p=f[h];else p="";var d={type:"ID3",version:c,tags:{title:n,artist:o,album:i,year:a,comment:l,genre:p}};return u&&(d.tags.track=u),d}}])&&o(e.prototype,r),s&&o(e,s),h}(s)),f=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];t.exports=u},583:(t,e,r)=>{"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(573);var o=r(574),i=r(579),a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"getFrameReaderFunction",value:function(t){return t in u?u[t]:"T"===t[0]?u["T*"]:"W"===t[0]?u["W*"]:null}},{key:"readFrames",value:function(e,r,n,o,i){for(var a={},s=this._getFrameHeaderSize(o);e<r-s;){var u=this._readFrameHeader(n,e,o),f=u.id;if(!f)break;var c=u.flags,l=u.size,h=e+u.headerSize,p=n;if(e+=u.headerSize+u.size,!i||-1!==i.indexOf(f)){if("MP3e"===f||"\0MP3"===f||"\0\0MP"===f||" MP3"===f)break;c&&c.format.unsynchronisation&&!o.flags.unsynchronisation&&(p=this.getUnsyncFileReader(p,h,l),h=0,l=p.getSize()),c&&c.format.data_length_indicator&&(h+=4,l-=4);var d=t.getFrameReaderFunction(f),g=d?d.apply(this,[h,l,p,c,o]):null,y={id:f,size:l,description:this._getFrameDescription(f),data:g};f in a?(a[f].id&&(a[f]=[a[f]]),a[f].push(y)):a[f]=y}}return a}},{key:"_getFrameHeaderSize",value:function(t){var e=t.major;return 2==e?6:3==e||4==e?10:0}},{key:"_readFrameHeader",value:function(t,e,r){var n=r.major,o=null,i=this._getFrameHeaderSize(r);switch(n){case 2:var a=t.getStringAt(e,3),s=t.getInteger24At(e+3,!0);break;case 3:a=t.getStringAt(e,4),s=t.getLongAt(e+4,!0);break;case 4:a=t.getStringAt(e,4),s=t.getSynchsafeInteger32At(e+4)}return a!=String.fromCharCode(0,0,0)&&a!=String.fromCharCode(0,0,0,0)||(a=""),a&&n>2&&(o=this._readFrameFlags(t,e+8)),{id:a||"",size:s||0,headerSize:i||0,flags:o}}},{key:"_readFrameFlags",value:function(t,e){return{message:{tag_alter_preservation:t.isBitSetAt(e,6),file_alter_preservation:t.isBitSetAt(e,5),read_only:t.isBitSetAt(e,4)},format:{grouping_identity:t.isBitSetAt(e+1,7),compression:t.isBitSetAt(e+1,3),encryption:t.isBitSetAt(e+1,2),unsynchronisation:t.isBitSetAt(e+1,1),data_length_indicator:t.isBitSetAt(e+1,0)}}}},{key:"_getFrameDescription",value:function(t){return t in a?a[t]:"Unknown"}},{key:"getUnsyncFileReader",value:function(t,e,r){for(var n=t.getBytesAt(e,r),o=0;o<n.length-1;o++)255===n[o]&&0===n[o+1]&&n.splice(o+1,1);return new i(n)}}],null&&n(e.prototype,null),r&&n(e,r),t}(),u={};function f(t){var e;switch(t){case 0:default:e="iso-8859-1";break;case 1:e="utf-16";break;case 2:e="utf-16be";break;case 3:e="utf-8"}return e}function c(t,e,r,n){var o=r.getStringWithCharsetAt(t+1,e-1,n),i=r.getStringWithCharsetAt(t+1+o.bytesReadCount,e-1-o.bytesReadCount,n);return{user_description:o.toString(),data:i.toString()}}u.APIC=function(t,e,r,n,o){var i=t,a=f(r.getByteAt(t));switch(o&&o.major){case 2:var s=r.getStringAt(t+1,3);t+=4;break;case 3:case 4:t+=1+(s=r.getStringWithCharsetAt(t+1,e-1)).bytesReadCount;break;default:throw new Error("Couldn't read ID3v2 major version.")}var u=r.getByteAt(t),c=l[u],h=r.getStringWithCharsetAt(t+1,e-(t-i)-1,a);return t+=1+h.bytesReadCount,{format:s.toString(),type:c,description:h.toString(),data:r.getBytesAt(t,i+e-t)}},u.CHAP=function(t,e,r,n,i){var a=t,s={},u=o.readNullTerminatedString(r.getBytesAt(t,e));s.id=u.toString(),t+=u.bytesReadCount,s.startTime=r.getLongAt(t,!0),t+=4,s.endTime=r.getLongAt(t,!0),t+=4,s.startOffset=r.getLongAt(t,!0),t+=4,s.endOffset=r.getLongAt(t,!0);var f=e-((t+=4)-a);return s.subFrames=this.readFrames(t,t+f,r,i),s},u.CTOC=function(t,e,r,n,i){var a=t,s={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},u=o.readNullTerminatedString(r.getBytesAt(t,e));s.id=u.toString(),t+=u.bytesReadCount,s.topLevel=r.isBitSetAt(t,1),s.ordered=r.isBitSetAt(t,0),t++,s.entryCount=r.getByteAt(t),t++;for(var f=0;f<s.entryCount;f++){var c=o.readNullTerminatedString(r.getBytesAt(t,e-(t-a)));s.childElementIds.push(c.toString()),t+=c.bytesReadCount}var l=e-(t-a);return s.subFrames=this.readFrames(t,t+l,r,i),s},u.COMM=function(t,e,r,n,o){var i=t,a=f(r.getByteAt(t)),s=r.getStringAt(t+1,3),u=r.getStringWithCharsetAt(t+4,e-4,a);t+=4+u.bytesReadCount;var c=r.getStringWithCharsetAt(t,i+e-t,a);return{language:s,short_description:u.toString(),text:c.toString()}},u.COM=u.COMM,u.PIC=function(t,e,r,n,o){return u.APIC(t,e,r,n,o)},u.PCNT=function(t,e,r,n,o){return r.getLongAt(t,!1)},u.CNT=u.PCNT,u["T*"]=function(t,e,r,n,o){var i=f(r.getByteAt(t));return r.getStringWithCharsetAt(t+1,e-1,i).toString()},u.TXXX=function(t,e,r,n,o){var i=f(r.getByteAt(t));return c(t,e,r,i)},u.WXXX=function(t,e,r,n,o){if(0===e)return null;var i=f(r.getByteAt(t));return c(t,e,r,i)},u["W*"]=function(t,e,r,n,o){return 0===e?null:r.getStringWithCharsetAt(t,e,"iso-8859-1").toString()},u.TCON=function(t,e,r,n){return u["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},u.TCO=u.TCON,u.USLT=function(t,e,r,n,o){var i=t,a=f(r.getByteAt(t)),s=r.getStringAt(t+1,3),u=r.getStringWithCharsetAt(t+4,e-4,a);t+=4+u.bytesReadCount;var c=r.getStringWithCharsetAt(t,i+e-t,a);return{language:s,descriptor:u.toString(),lyrics:c.toString()}},u.ULT=u.USLT,u.UFID=function(t,e,r,n,i){var a=o.readNullTerminatedString(r.getBytesAt(t,e));t+=a.bytesReadCount;var s=r.getBytesAt(t,e-a.bytesReadCount);return{ownerIdentifier:a.toString(),identifier:s}};var l=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];t.exports=s},582:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var s=r(580),u=(r(573),r(583)),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(p,t);var e,r,s,f,l,h=(f=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(f);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,t)});function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),h.apply(this,arguments)}return e=p,s=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(t){return"ID3"===String.fromCharCode.apply(String,t.slice(0,3))}}],(r=[{key:"_loadData",value:function(t,e){t.loadRange([6,9],{onSuccess:function(){t.loadRange([0,10+t.getSynchsafeInteger32At(6)-1],e)},onError:e.onError})}},{key:"_parseData",value:function(t,e){var r=0,n=t.getByteAt(r+3);if(n>4)return{type:"ID3",version:">2.4",tags:{}};var o=t.getByteAt(r+4),i=t.isBitSetAt(r+5,7),a=t.isBitSetAt(r+5,6),s=t.isBitSetAt(r+5,5),f=t.getSynchsafeInteger32At(r+6);r+=10,a&&(r+=4===n?t.getSynchsafeInteger32At(r):t.getLongAt(r,!0)+4);var l={type:"ID3",version:"2."+n+"."+o,major:n,revision:o,flags:{unsynchronisation:i,extended_header:a,experimental_indicator:s,footer_present:!1},size:f,tags:{}};if(e)var h=this._expandShortcutTags(e);var p=f+10;l.flags.unsynchronisation&&(t=u.getUnsyncFileReader(t,r,f),r=0,p=t.getSize());var d=u.readFrames(r,p,t,l,h);for(var g in c)if(c.hasOwnProperty(g)){var y=this._getFrameData(d,c[g]);y&&(l.tags[g]=y)}for(var v in d)d.hasOwnProperty(v)&&(l.tags[v]=d[v]);return l}},{key:"_getFrameData",value:function(t,e){for(var r,n=0;r=e[n];n++)if(r in t)return(t[r]instanceof Array?t[r][0]:t[r]).data}},{key:"getShortcuts",value:function(){return c}}])&&o(e.prototype,r),s&&o(e,s),p}(s),c={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};t.exports=f},584:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var s=r(580),u=(r(573),function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(d,t);var e,r,s,u,h,p=(u=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(u);if(h){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,t)});function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),p.apply(this,arguments)}return e=d,s=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(t){return"ftyp"===String.fromCharCode.apply(String,t.slice(4,8))}}],(r=[{key:"_loadData",value:function(t,e){var r=this;t.loadRange([0,16],{onSuccess:function(){r._loadAtom(t,0,"",e)},onError:e.onError})}},{key:"_loadAtom",value:function(t,e,r,n){if(e>=t.getSize())n.onSuccess();else{var o=this,i=t.getLongAt(e,!0);if(0==i||isNaN(i))n.onSuccess();else{var a=t.getStringAt(e+4,4);if(this._isContainerAtom(a)){"meta"==a&&(e+=4);var s=(r?r+".":"")+a;"moov.udta.meta.ilst"===s?t.loadRange([e,e+i],n):t.loadRange([e+8,e+8+8],{onSuccess:function(){o._loadAtom(t,e+8,s,n)},onError:n.onError})}else t.loadRange([e+i,e+i+8],{onSuccess:function(){o._loadAtom(t,e+i,r,n)},onError:n.onError})}}}},{key:"_isContainerAtom",value:function(t){return["moov","udta","meta","ilst"].indexOf(t)>=0}},{key:"_canReadAtom",value:function(t){return"----"!==t}},{key:"_parseData",value:function(t,e){var r={};for(var n in e=this._expandShortcutTags(e),this._readAtom(r,t,0,t.getSize(),e),l)if(l.hasOwnProperty(n)){var o=r[l[n]];o&&(r[n]="track"===n?o.data.track:o.data)}return{type:"MP4",ftyp:t.getStringAt(8,4),version:t.getLongAt(12,!0),tags:r}}},{key:"_readAtom",value:function(t,e,r,n,o,i,a){a=void 0===a?"":a+"  ";for(var s=r;s<r+n;){var u=e.getLongAt(s,!0);if(0==u)return;var f=e.getStringAt(s+4,4);if(this._isContainerAtom(f)){"meta"==f&&(s+=4);var c=(i?i+".":"")+f;return void this._readAtom(t,e,s+8,u-8,o,c,a)}(!o||o.indexOf(f)>=0)&&"moov.udta.meta.ilst"===i&&this._canReadAtom(f)&&(t[f]=this._readMetadataAtom(e,s)),s+=u}}},{key:"_readMetadataAtom",value:function(t,e){var r=t.getLongAt(e,!0),n=t.getStringAt(e+4,4),o=t.getInteger24At(e+16+1,!0),i=f[o],a=!0;if("trkn"==n)s={track:t.getShortAt(e+16+10,a),total:t.getShortAt(e+16+14,a)};else if("disk"==n)s={disk:t.getShortAt(e+16+10,a),total:t.getShortAt(e+16+14,a)};else{var s,u=e+24,l=r-24;switch("covr"===n&&"uint8"===i&&(i="jpeg"),i){case"text":s=t.getStringWithCharsetAt(u,l,"utf-8").toString();break;case"uint8":s=t.getShortAt(u,!1);break;case"int":case"uint":s=("int"==i?1==l?t.getSByteAt:2==l?t.getSShortAt:4==l?t.getSLongAt:t.getLongAt:1==l?t.getByteAt:2==l?t.getShortAt:t.getLongAt).call(t,u+(8==l?4:0),!0);break;case"jpeg":case"png":s={format:"image/"+i,data:t.getBytesAt(u,l)}}}return{id:n,size:r,description:c[n]||"Unknown",data:s}}},{key:"getShortcuts",value:function(){return l}}])&&o(e.prototype,r),s&&o(e,s),d}(s)),f={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},c={"©alb":"Album","©ART":"Artist",aART:"Album Artist","©day":"Release Date","©nam":"Title","©gen":"Genre",gnre:"Genre",trkn:"Track Number","©wrt":"Composer","©too":"Encoding Tool","©enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","©grp":"Grouping",keyw:"Keywords","©lyr":"Lyrics","©cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},l={title:"©nam",artist:"©ART",album:"©alb",year:"©day",comment:"©cmt",track:"trkn",genre:"©gen",picture:"covr",lyrics:"©lyr"};t.exports=u},573:(t,e,r)=>{"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r(574),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_isInitialized",void 0),o(this,"_size",void 0),this._isInitialized=!1,this._size=0}var e,r,a;return e=t,a=[{key:"canReadFile",value:function(t){throw new Error("Must implement canReadFile function")}}],(r=[{key:"init",value:function(t){var e=this;if(!this._isInitialized)return this._init({onSuccess:function(){e._isInitialized=!0,t.onSuccess()},onError:t.onError});setTimeout(t.onSuccess,1)}},{key:"_init",value:function(t){throw new Error("Must implement init function")}},{key:"loadRange",value:function(t,e){throw new Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw new Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(t){throw new Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(t,e){for(var r=new Array(e),n=0;n<e;n++)r[n]=this.getByteAt(t+n);return r}},{key:"isBitSetAt",value:function(t,e){return 0!=(this.getByteAt(t)&1<<e)}},{key:"getSByteAt",value:function(t){var e=this.getByteAt(t);return e>127?e-256:e}},{key:"getShortAt",value:function(t,e){var r=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t);return r<0&&(r+=65536),r}},{key:"getSShortAt",value:function(t,e){var r=this.getShortAt(t,e);return r>32767?r-65536:r}},{key:"getLongAt",value:function(t,e){var r=this.getByteAt(t),n=this.getByteAt(t+1),o=this.getByteAt(t+2),i=this.getByteAt(t+3),a=e?(((r<<8)+n<<8)+o<<8)+i:(((i<<8)+o<<8)+n<<8)+r;return a<0&&(a+=4294967296),a}},{key:"getSLongAt",value:function(t,e){var r=this.getLongAt(t,e);return r>2147483647?r-4294967296:r}},{key:"getInteger24At",value:function(t,e){var r=this.getByteAt(t),n=this.getByteAt(t+1),o=this.getByteAt(t+2),i=e?((r<<8)+n<<8)+o:((o<<8)+n<<8)+r;return i<0&&(i+=16777216),i}},{key:"getStringAt",value:function(t,e){for(var r=[],n=t,o=0;n<t+e;n++,o++)r[o]=String.fromCharCode(this.getByteAt(n));return r.join("")}},{key:"getStringWithCharsetAt",value:function(t,e,r){var n,o=this.getBytesAt(t,e);switch((r||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":n=i.readUTF16String(o,"utf-16be"===r);break;case"utf-8":n=i.readUTF8String(o);break;default:n=i.readNullTerminatedString(o)}return n}},{key:"getCharAt",value:function(t){return String.fromCharCode(this.getByteAt(t))}},{key:"getSynchsafeInteger32At",value:function(t){var e=this.getByteAt(t),r=this.getByteAt(t+1),n=this.getByteAt(t+2);return 127&this.getByteAt(t+3)|(127&n)<<7|(127&r)<<14|(127&e)<<21}}])&&n(e.prototype,r),a&&n(e,a),t}();t.exports=a},580:(t,e,r)=>{"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(573);var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_mediaFileReader",void 0),o(this,"_tags",void 0),this._mediaFileReader=e,this._tags=null}var e,r,i;return e=t,i=[{key:"getTagIdentifierByteRange",value:function(){throw new Error("Must implement")}},{key:"canReadTagFormat",value:function(t){throw new Error("Must implement")}}],(r=[{key:"setTagsToRead",value:function(t){return this._tags=t,this}},{key:"read",value:function(t){var e=this;this._mediaFileReader.init({onSuccess:function(){e._loadData(e._mediaFileReader,{onSuccess:function(){try{var r=e._parseData(e._mediaFileReader,e._tags)}catch(e){if(t.onError)return void t.onError({type:"parseData",info:e.message})}t.onSuccess(r)},onError:t.onError})},onError:t.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(t,e){throw new Error("Must implement _loadData function")}},{key:"_parseData",value:function(t,e){throw new Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(t){if(!t)return null;for(var e,r=[],n=this.getShortcuts(),o=0;e=t[o];o++)r=r.concat(n[e]||[e]);return r}}])&&n(e.prototype,r),i&&n(e,i),t}();t.exports=i},588:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=r(589),c=r(576),l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(g,t);var e,r,l,h,p,d=(h=g,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(h);if(p){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}(this,t)});function g(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),u(a(e=d.call(this)),"_path",void 0),u(a(e),"_fileData",void 0),e._path=t,e._fileData=new c,e}return e=g,l=[{key:"canReadFile",value:function(t){return"string"==typeof t&&!/^[a-z]+:\/\//i.test(t)}}],(r=[{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}},{key:"_init",value:function(t){var e=this;f.stat(e._path,(function(r,n){r?t.onError&&t.onError({type:"fs",info:r}):(e._size=n.size,t.onSuccess())}))}},{key:"loadRange",value:function(t,e){var r=-1,n=this._fileData,o=t[1]-t[0]+1,i=e.onSuccess,a=e.onError||function(t){};if(n.hasDataRange(t[0],t[1]))process.nextTick(i);else{var s=function(t,e,n){f.close(r,(function(t){t&&console.error(t)})),t?a({type:"fs",info:t}):(u(n),i())},u=function(e){var r=Array.prototype.slice.call(e,0,o);n.addData(t[0],r)};f.open(this._path,"r",void 0,(function(e,n){if(e)a({type:"fs",info:e});else{r=n;var i=new Buffer(o);f.read(n,i,0,o,t[0],s)}}))}}}])&&o(e.prototype,r),l&&o(e,l),g}(r(573));t.exports=l},586:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=r(587),c=r(16).Buffer,l=r(576),h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(y,t);var e,r,h,p,d,g=(p=y,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(p);if(d){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}(this,t)});function y(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),u(a(e=g.call(this)),"_path",void 0),u(a(e),"_fileData",void 0),e._path=t,e._fileData=new l,e}return e=y,h=[{key:"canReadFile",value:function(t){return"string"==typeof t&&!/^[a-z]+:\/\//i.test(t)}}],(r=[{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}},{key:"_init",value:function(t){var e=this;f.stat(e._path).then((function(r){e._size=r.size,t.onSuccess()})).catch((function(e){t.onError({type:"fs",info:e})}))}},{key:"loadRange",value:function(t,e){var r=this._fileData,n=t[1]-t[0]+1,o=e.onSuccess,i=e.onError||function(t){};f.read(this._path,n,t[0],{encoding:"base64"}).then((function(e){var i=new c(e,"base64"),a=Array.prototype.slice.call(i,0,n);r.addData(t[0],a),o()})).catch((function(t){i({type:"fs",info:t})}))}}])&&o(e.prototype,r),h&&o(e,h),y}(r(573));t.exports=h},574:t=>{"use strict";function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_value",void 0),r(this,"bytesReadCount",void 0),r(this,"length",void 0),this._value=e,this.bytesReadCount=n,this.length=e.length}var n,o;return n=t,(o=[{key:"toString",value:function(){return this._value}}])&&e(n.prototype,o),t}(),o={readUTF16String:function(t,e,r){var o=0,i=1,a=0;r=Math.min(r||t.length,t.length),254==t[0]&&255==t[1]?(e=!0,o=2):255==t[0]&&254==t[1]&&(e=!1,o=2),e&&(i=0,a=1);for(var s=[],u=0;o<r;u++){var f=t[o+i],c=(f<<8)+t[o+a];if(o+=2,0==c)break;if(f<216||f>=224)s[u]=String.fromCharCode(c);else{var l=(t[o+i]<<8)+t[o+a];o+=2,s[u]=String.fromCharCode(c,l)}}return new n(s.join(""),o)},readUTF8String:function(t,e){var r=0;e=Math.min(e||t.length,t.length),239==t[0]&&187==t[1]&&191==t[2]&&(r=3);for(var o=[],i=0;r<e;i++){var a=t[r++];if(0==a)break;if(a<128)o[i]=String.fromCharCode(a);else if(a>=194&&a<224){var s=t[r++];o[i]=String.fromCharCode(((31&a)<<6)+(63&s))}else if(a>=224&&a<240){s=t[r++];var u=t[r++];o[i]=String.fromCharCode(((255&a)<<12)+((63&s)<<6)+(63&u))}else if(a>=240&&a<245){var f=((7&a)<<18)+((63&(s=t[r++]))<<12)+((63&(u=t[r++]))<<6)+(63&t[r++])-65536;o[i]=String.fromCharCode(55296+(f>>10),56320+(1023&f))}}return new n(o.join(""),r)},readNullTerminatedString:function(t,e){var r=[];e=e||t.length;for(var o=0;o<e;){var i=t[o++];if(0==i)break;r[o-1]=String.fromCharCode(i)}return new n(r.join(""),o)}};t.exports=o},575:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=r(576),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(g,t);var e,c,l,h,p,d=(h=g,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(h);if(p){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}(this,t)});function g(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),u(a(e=d.call(this)),"_url",void 0),u(a(e),"_fileData",void 0),e._url=t,e._fileData=new f,e}return e=g,l=[{key:"canReadFile",value:function(t){return"string"==typeof t&&/^[a-z]+:\/\//i.test(t)}},{key:"setConfig",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this._config[e]=t[e]);for(var r=this._config.disallowedXhrHeaders,n=0;n<r.length;n++)r[n]=r[n].toLowerCase()}}],(c=[{key:"_init",value:function(t){g._config.avoidHeadRequests?this._fetchSizeWithGetRequest(t):this._fetchSizeWithHeadRequest(t)}},{key:"_fetchSizeWithHeadRequest",value:function(t){var e=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(r){var n=e._parseContentLength(r);n?(e._size=n,t.onSuccess()):e._fetchSizeWithGetRequest(t)},onError:t.onError})}},{key:"_fetchSizeWithGetRequest",value:function(t){var e=this,r=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",r,{onSuccess:function(r){var n=e._parseContentRange(r),o=e._getXhrResponseContent(r);if(n){if(null==n.instanceLength)return void e._fetchEntireFile(t);e._size=n.instanceLength}else e._size=o.length;e._fileData.addData(0,o),t.onSuccess()},onError:t.onError})}},{key:"_fetchEntireFile",value:function(t){var e=this;this._makeXHRRequest("GET",null,{onSuccess:function(r){var n=e._getXhrResponseContent(r);e._size=n.length,e._fileData.addData(0,n),t.onSuccess()},onError:t.onError})}},{key:"_getXhrResponseContent",value:function(t){return t.responseBody||t.responseText||""}},{key:"_parseContentLength",value:function(t){var e=this._getResponseHeader(t,"Content-Length");return null==e?e:parseInt(e,10)}},{key:"_parseContentRange",value:function(t){var e=this._getResponseHeader(t,"Content-Range");if(e){var r=e.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!r)throw new Error("FIXME: Unknown Content-Range syntax: "+e);return{firstBytePosition:parseInt(r[1],10),lastBytePosition:parseInt(r[2],10),instanceLength:r[3]?parseInt(r[3],10):null}}return null}},{key:"loadRange",value:function(t,e){var r=this;r._fileData.hasDataRange(t[0],Math.min(r._size,t[1]))?setTimeout(e.onSuccess,1):((t=this._roundRangeToChunkMultiple(t))[1]=Math.min(r._size,t[1]),this._makeXHRRequest("GET",t,{onSuccess:function(n){var o=r._getXhrResponseContent(n);r._fileData.addData(t[0],o),e.onSuccess()},onError:e.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(t){var e=t[1]-t[0]+1,r=1024*Math.ceil(e/1024);return[t[0],t[0]+r-1]}},{key:"_makeXHRRequest",value:function(t,e,r){var n=this._createXHRObject();n.open(t,this._url);var o=function(){200===n.status||206===n.status?r.onSuccess(n):r.onError&&r.onError({type:"xhr",info:"Unexpected HTTP status "+n.status+".",xhr:n}),n=null};void 0!==n.onload?(n.onload=o,n.onerror=function(){r.onError&&r.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:n})}):n.onreadystatechange=function(){4===n.readyState&&o()},g._config.timeoutInSec&&(n.timeout=1e3*g._config.timeoutInSec,n.ontimeout=function(){r.onError&&r.onError({type:"xhr",info:"Timeout after "+n.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:n})}),n.overrideMimeType("text/plain; charset=x-user-defined"),e&&this._setRequestHeader(n,"Range","bytes="+e[0]+"-"+e[1]),this._setRequestHeader(n,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),n.send(null)}},{key:"_setRequestHeader",value:function(t,e,r){g._config.disallowedXhrHeaders.indexOf(e.toLowerCase())<0&&t.setRequestHeader(e,r)}},{key:"_hasResponseHeader",value:function(t,e){var r=t.getAllResponseHeaders();if(!r)return!1;for(var n=r.split("\r\n"),o=[],i=0;i<n.length;i++)o[i]=n[i].split(":")[0].toLowerCase();return o.indexOf(e.toLowerCase())>=0}},{key:"_getResponseHeader",value:function(t,e){return this._hasResponseHeader(t,e)?t.getResponseHeader(e):null}},{key:"getByteAt",value:function(t){return 255&this._fileData.getByteAt(t).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(r(577).XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw new Error("XMLHttpRequest is not supported")}}])&&o(e.prototype,c),l&&o(e,l),g}(r(573));u(c,"_config",void 0),c._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},t.exports=c},572:(t,e,r)=>{"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(573);var s=r(575),u=r(578),f=r(579),c=(r(580),r(581)),l=r(582),h=r(584),p=r(585),d=[],g=[];function y(t,e){var r=t.offset>=0&&t.offset+t.length>=e,n=t.offset<0&&(-t.offset>e||t.offset+t.length>0);return!(r||n)}var v=function(){function t(e){n(this,t),a(this,"_file",void 0),a(this,"_tagsToRead",void 0),a(this,"_fileReader",void 0),a(this,"_tagReader",void 0),this._file=e}return i(t,[{key:"setTagsToRead",value:function(t){return this._tagsToRead=t,this}},{key:"setFileReader",value:function(t){return this._fileReader=t,this}},{key:"setTagReader",value:function(t){return this._tagReader=t,this}},{key:"read",value:function(t){var e=new(this._getFileReader())(this._file),r=this;e.init({onSuccess:function(){r._getTagReader(e,{onSuccess:function(n){new n(e).setTagsToRead(r._tagsToRead).read(t)},onError:t.onError})},onError:t.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var t=0;t<d.length;t++)if(d[t].canReadFile(this._file))return d[t];throw new Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(t,e){if(this._tagReader){var r=this._tagReader;setTimeout((function(){e.onSuccess(r)}),1)}else this._findTagReader(t,e)}},{key:"_findTagReader",value:function(t,e){for(var r=[],n=[],o=t.getSize(),i=0;i<g.length;i++){var a=g[i].getTagIdentifierByteRange();y(a,o)&&(a.offset>=0&&a.offset<o/2||a.offset<0&&a.offset<-o/2?r.push(g[i]):n.push(g[i]))}var s=!1,u={onSuccess:function(){if(s){for(var r=0;r<g.length;r++){var n=g[r].getTagIdentifierByteRange();if(y(n,o)){try{var i=t.getBytesAt(n.offset>=0?n.offset:n.offset+o,n.length)}catch(t){return void(e.onError&&e.onError({type:"fileReader",info:t.message}))}if(g[r].canReadTagFormat(i))return void e.onSuccess(g[r])}}e.onError&&e.onError({type:"tagFormat",info:"No suitable tag reader found"})}else s=!0},onError:e.onError};this._loadTagIdentifierRanges(t,r,u),this._loadTagIdentifierRanges(t,n,u)}},{key:"_loadTagIdentifierRanges",value:function(t,e,r){if(0!==e.length){for(var n=[Number.MAX_VALUE,0],o=t.getSize(),i=0;i<e.length;i++){var a=e[i].getTagIdentifierByteRange(),s=a.offset>=0?a.offset:a.offset+o,u=s+a.length-1;n[0]=Math.min(s,n[0]),n[1]=Math.max(u,n[1])}t.loadRange(n,r)}else setTimeout(r.onSuccess,1)}}]),t}(),b=function(){function t(){n(this,t)}return i(t,null,[{key:"addFileReader",value:function(e){return d.push(e),t}},{key:"addTagReader",value:function(e){return g.push(e),t}},{key:"removeTagReader",value:function(e){var r=g.indexOf(e);return r>=0&&g.splice(r,1),t}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){s.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(t){s.setConfig({disallowedXhrHeaders:t})}},{key:"setXhrTimeoutInSec",value:function(t){s.setConfig({timeoutInSec:t})}}]),t}();if(b.addFileReader(s).addFileReader(u).addFileReader(f).addTagReader(l).addTagReader(c).addTagReader(h).addTagReader(p),"undefined"!=typeof process&&!process.browser)if("undefined"!=typeof navigator&&"ReactNative"===navigator.product){var m=r(586);b.addFileReader(m)}else{var w=r(588);b.addFileReader(w)}t.exports={read:function(t,e){new v(t).read(e)},Reader:v,Config:b}},28:(t,e,r)=>{var n,o,i,a,s;n=r(29),o=r(30).utf8,i=r(14),a=r(30).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):o.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),u=8*t.length,f=1732584193,c=-271733879,l=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var d=s._ff,g=s._gg,y=s._hh,v=s._ii;for(p=0;p<r.length;p+=16){var b=f,m=c,w=l,A=h;f=d(f,c,l,h,r[p+0],7,-680876936),h=d(h,f,c,l,r[p+1],12,-389564586),l=d(l,h,f,c,r[p+2],17,606105819),c=d(c,l,h,f,r[p+3],22,-1044525330),f=d(f,c,l,h,r[p+4],7,-176418897),h=d(h,f,c,l,r[p+5],12,1200080426),l=d(l,h,f,c,r[p+6],17,-1473231341),c=d(c,l,h,f,r[p+7],22,-45705983),f=d(f,c,l,h,r[p+8],7,1770035416),h=d(h,f,c,l,r[p+9],12,-1958414417),l=d(l,h,f,c,r[p+10],17,-42063),c=d(c,l,h,f,r[p+11],22,-1990404162),f=d(f,c,l,h,r[p+12],7,1804603682),h=d(h,f,c,l,r[p+13],12,-40341101),l=d(l,h,f,c,r[p+14],17,-1502002290),f=g(f,c=d(c,l,h,f,r[p+15],22,1236535329),l,h,r[p+1],5,-165796510),h=g(h,f,c,l,r[p+6],9,-1069501632),l=g(l,h,f,c,r[p+11],14,643717713),c=g(c,l,h,f,r[p+0],20,-373897302),f=g(f,c,l,h,r[p+5],5,-701558691),h=g(h,f,c,l,r[p+10],9,38016083),l=g(l,h,f,c,r[p+15],14,-660478335),c=g(c,l,h,f,r[p+4],20,-405537848),f=g(f,c,l,h,r[p+9],5,568446438),h=g(h,f,c,l,r[p+14],9,-1019803690),l=g(l,h,f,c,r[p+3],14,-187363961),c=g(c,l,h,f,r[p+8],20,1163531501),f=g(f,c,l,h,r[p+13],5,-1444681467),h=g(h,f,c,l,r[p+2],9,-51403784),l=g(l,h,f,c,r[p+7],14,1735328473),f=y(f,c=g(c,l,h,f,r[p+12],20,-1926607734),l,h,r[p+5],4,-378558),h=y(h,f,c,l,r[p+8],11,-2022574463),l=y(l,h,f,c,r[p+11],16,1839030562),c=y(c,l,h,f,r[p+14],23,-35309556),f=y(f,c,l,h,r[p+1],4,-1530992060),h=y(h,f,c,l,r[p+4],11,1272893353),l=y(l,h,f,c,r[p+7],16,-155497632),c=y(c,l,h,f,r[p+10],23,-1094730640),f=y(f,c,l,h,r[p+13],4,681279174),h=y(h,f,c,l,r[p+0],11,-358537222),l=y(l,h,f,c,r[p+3],16,-722521979),c=y(c,l,h,f,r[p+6],23,76029189),f=y(f,c,l,h,r[p+9],4,-640364487),h=y(h,f,c,l,r[p+12],11,-421815835),l=y(l,h,f,c,r[p+15],16,530742520),f=v(f,c=y(c,l,h,f,r[p+2],23,-995338651),l,h,r[p+0],6,-198630844),h=v(h,f,c,l,r[p+7],10,1126891415),l=v(l,h,f,c,r[p+14],15,-1416354905),c=v(c,l,h,f,r[p+5],21,-57434055),f=v(f,c,l,h,r[p+12],6,1700485571),h=v(h,f,c,l,r[p+3],10,-1894986606),l=v(l,h,f,c,r[p+10],15,-1051523),c=v(c,l,h,f,r[p+1],21,-2054922799),f=v(f,c,l,h,r[p+8],6,1873313359),h=v(h,f,c,l,r[p+15],10,-30611744),l=v(l,h,f,c,r[p+6],15,-1560198380),c=v(c,l,h,f,r[p+13],21,1309151649),f=v(f,c,l,h,r[p+4],6,-145523070),h=v(h,f,c,l,r[p+11],10,-1120210379),l=v(l,h,f,c,r[p+2],15,718787259),c=v(c,l,h,f,r[p+9],21,-343485551),f=f+b>>>0,c=c+m>>>0,l=l+w>>>0,h=h+A>>>0}return n.endian([f,c,l,h])})._ff=function(t,e,r,n,o,i,a){var s=t+(e&r|~e&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._gg=function(t,e,r,n,o,i,a){var s=t+(e&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._hh=function(t,e,r,n,o,i,a){var s=t+(e^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._ii=function(t,e,r,n,o,i,a){var s=t+(r^(e|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(s(t,e));return e&&e.asBytes?r:e&&e.asString?a.bytesToString(r):n.bytesToHex(r)}},19:(t,e,r)=>{"use strict";var n=r(12),o=r(20);t.exports=function(t,e){for(var r=[],i=t,a=1;Array.isArray(i);)r.push(i.length),a*=i.length,i=i[0];return 0===r.length?n():(e||(e=n(new Float64Array(a),r)),o(e,t),e)}},20:(t,e,r)=>{t.exports=r(21)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},12:(t,e,r)=>{var n=r(13),o=r(14),i="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(a);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function u(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var o="generic"===t;if(-1===e){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(i)()}if(0===e)return i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",new Function("TrivialArray",i)(f[t][0]);i=["'use strict'"];var a=n(e),u=a.map((function(t){return"i"+t})),c="this.offset+"+a.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),l=a.map((function(t){return"b"+t})).join(","),h=a.map((function(t){return"c"+t})).join(",");i.push("function "+r+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),o?i.push("return this.data.set("+c+",v)}"):i.push("return this.data["+c+"]=v}"),i.push("proto.get=function "+r+"_get("+u.join(",")+"){"),o?i.push("return this.data.get("+c+")}"):i.push("return this.data["+c+"]}"),i.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),i.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+a.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+a.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var p=a.map((function(t){return"a"+t+"=this.shape["+t+"]"})),d=a.map((function(t){return"c"+t+"=this.stride["+t+"]"}));i.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var g=0;g<e;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");for(i.push("return new "+r+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"c"+t})).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+a.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+a.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),g=0;g<e;++g)i.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");i.push("return new "+r+"(this.data,"+a.map((function(t){return"a"+t})).join(",")+","+a.map((function(t){return"b"+t})).join(",")+",c)}");var y=new Array(e),v=new Array(e);for(g=0;g<e;++g)y[g]="a[i"+g+"]",v[g]="b[i"+g+"]";for(i.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+y.join(",")+","+v.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset"),g=0;g<e;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map((function(t){return"shape["+t+"]"})).join(",")+","+a.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(f[t],s)}var f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,r,n){if(void 0===t)return(0,f.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===r){r=new Array(a);for(var s=a-1,c=1;s>=0;--s)r[s]=c,c*=e[s]}if(void 0===n)for(n=0,s=0;s<a;++s)r[s]<0&&(n-=(e[s]-1)*r[s]);for(var l=function(t){if(o(t))return"buffer";if(i)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),h=f[l];h.length<=a+1;)h.push(u(l,h.length-1));return(0,h[a+1])(t,e,r,n)}},15:(t,e)=>{"use strict";function r(t,e,r,n){for(var o=t[e++],i=1<<o,a=i+1,s=a+1,u=o+1,f=(1<<u)-1,c=0,l=0,h=0,p=t[e++],d=new Int32Array(4096),g=null;;){for(;c<16&&0!==p;)l|=t[e++]<<c,c+=8,1===p?p=t[e++]:--p;if(c<u)break;var y=l&f;if(l>>=u,c-=u,y!==i){if(y===a)break;for(var v=y<s?y:g,b=0,m=v;m>i;)m=d[m]>>8,++b;var w=m;if(h+b+(v!==y?1:0)>n)return void console.log("Warning, gif stream longer than expected.");r[h++]=w;var A=h+=b;for(v!==y&&(r[h++]=w),m=v;b--;)m=d[m],r[--A]=255&m,m>>=8;null!==g&&s<4096&&(d[s++]=g<<8|w,s>=f+1&&u<12&&(++u,f=f<<1|1)),g=y}else s=a+1,f=(1<<(u=o+1))-1,g=null}return h!==n&&console.log("Warning, gif stream shorter than expected."),r}try{e.GifWriter=function(t,e,r,n){var o=0,i=void 0===(n=void 0===n?{}:n).loop?null:n.loop,a=void 0===n.palette?null:n.palette;if(e<=0||r<=0||e>65535||r>65535)throw new Error("Width/Height invalid.");function s(t){var e=t.length;if(e<2||e>256||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}t[o++]=71,t[o++]=73,t[o++]=70,t[o++]=56,t[o++]=57,t[o++]=97;var u=0,f=0;if(null!==a){for(var c=s(a);c>>=1;)++u;if(c=1<<u,--u,void 0!==n.background){if((f=n.background)>=c)throw new Error("Background index out of range.");if(0===f)throw new Error("Background index explicitly passed as 0.")}}if(t[o++]=255&e,t[o++]=e>>8&255,t[o++]=255&r,t[o++]=r>>8&255,t[o++]=(null!==a?128:0)|u,t[o++]=f,t[o++]=0,null!==a)for(var l=0,h=a.length;l<h;++l){var p=a[l];t[o++]=p>>16&255,t[o++]=p>>8&255,t[o++]=255&p}if(null!==i){if(i<0||i>65535)throw new Error("Loop count invalid.");t[o++]=33,t[o++]=255,t[o++]=11,t[o++]=78,t[o++]=69,t[o++]=84,t[o++]=83,t[o++]=67,t[o++]=65,t[o++]=80,t[o++]=69,t[o++]=50,t[o++]=46,t[o++]=48,t[o++]=3,t[o++]=1,t[o++]=255&i,t[o++]=i>>8&255,t[o++]=0}var d=!1;this.addFrame=function(e,r,n,i,u,f){if(!0===d&&(--o,d=!1),f=void 0===f?{}:f,e<0||r<0||e>65535||r>65535)throw new Error("x/y invalid.");if(n<=0||i<=0||n>65535||i>65535)throw new Error("Width/Height invalid.");if(u.length<n*i)throw new Error("Not enough pixels for the frame size.");var c=!0,l=f.palette;if(null==l&&(c=!1,l=a),null==l)throw new Error("Must supply either a local or global palette.");for(var h=s(l),p=0;h>>=1;)++p;h=1<<p;var g=void 0===f.delay?0:f.delay,y=void 0===f.disposal?0:f.disposal;if(y<0||y>3)throw new Error("Disposal out of range.");var v=!1,b=0;if(void 0!==f.transparent&&null!==f.transparent&&(v=!0,(b=f.transparent)<0||b>=h))throw new Error("Transparent color index.");if((0!==y||v||0!==g)&&(t[o++]=33,t[o++]=249,t[o++]=4,t[o++]=y<<2|(!0===v?1:0),t[o++]=255&g,t[o++]=g>>8&255,t[o++]=b,t[o++]=0),t[o++]=44,t[o++]=255&e,t[o++]=e>>8&255,t[o++]=255&r,t[o++]=r>>8&255,t[o++]=255&n,t[o++]=n>>8&255,t[o++]=255&i,t[o++]=i>>8&255,t[o++]=!0===c?128|p-1:0,!0===c)for(var m=0,w=l.length;m<w;++m){var A=l[m];t[o++]=A>>16&255,t[o++]=A>>8&255,t[o++]=255&A}return o=function(t,e,r,n){t[e++]=r;var o=e++,i=1<<r,a=i-1,s=i+1,u=s+1,f=r+1,c=0,l=0;function h(r){for(;c>=r;)t[e++]=255&l,l>>=8,c-=8,e===o+256&&(t[o]=255,o=e++)}function p(t){l|=t<<c,c+=f,h(8)}var d=n[0]&a,g={};p(i);for(var y=1,v=n.length;y<v;++y){var b=n[y]&a,m=d<<8|b,w=g[m];if(void 0===w){for(l|=d<<c,c+=f;c>=8;)t[e++]=255&l,l>>=8,c-=8,e===o+256&&(t[o]=255,o=e++);4096===u?(p(i),u=s+1,f=r+1,g={}):(u>=1<<f&&++f,g[m]=u++),d=b}else d=w}return p(d),p(s),h(1),o+1===e?t[o]=0:(t[o]=e-o-1,t[e++]=0),e}(t,o,p<2?2:p,u),o},this.end=function(){return!1===d&&(t[o++]=59,d=!0),o},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(e){t=e},this.getOutputBufferPosition=function(){return o},this.setOutputBufferPosition=function(t){o=t}},e.GifReader=function(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,o=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<1+(7&i);t[e++],t[e++];var u=null,f=null;a&&(u=e,f=s,e+=3*s);var c=!0,l=[],h=0,p=null,d=0,g=null;for(this.width=n,this.height=o;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,g=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var y=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],0==(1&y)&&(p=null),d=y>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,A=t[e++],_=A>>6&1,S=1<<1+(7&A),R=u,T=f,k=!1;A>>7&&(k=!0,R=e,T=S,e+=3*S);var E=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}l.push({x:v,y:b,width:m,height:w,has_local_palette:k,palette_offset:R,palette_size:T,data_offset:E,data_length:e-E,transparent_index:p,interlaced:!!_,delay:h,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return g},this.frameInfo=function(t){if(t<0||t>=l.length)throw new Error("Frame index out of range.");return l[t]},this.decodeAndBlitFrameBGRA=function(e,o){var i=this.frameInfo(e),a=i.width*i.height,s=new Uint8Array(a);r(t,i.data_offset,s,a);var u=i.palette_offset,f=i.transparent_index;null===f&&(f=256);var c=i.width,l=n-c,h=c,p=4*(i.y*n+i.x),d=4*((i.y+i.height)*n+i.x),g=p,y=4*l;!0===i.interlaced&&(y+=4*n*7);for(var v=8,b=0,m=s.length;b<m;++b){var w=s[b];if(0===h&&(h=c,(g+=y)>=d&&(y=4*l+4*n*(v-1),g=p+(c+l)*(v<<1),v>>=1)),w===f)g+=4;else{var A=t[u+3*w],_=t[u+3*w+1],S=t[u+3*w+2];o[g++]=S,o[g++]=_,o[g++]=A,o[g++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,o){var i=this.frameInfo(e),a=i.width*i.height,s=new Uint8Array(a);r(t,i.data_offset,s,a);var u=i.palette_offset,f=i.transparent_index;null===f&&(f=256);var c=i.width,l=n-c,h=c,p=4*(i.y*n+i.x),d=4*((i.y+i.height)*n+i.x),g=p,y=4*l;!0===i.interlaced&&(y+=4*n*7);for(var v=8,b=0,m=s.length;b<m;++b){var w=s[b];if(0===h&&(h=c,(g+=y)>=d&&(y=4*l+4*n*(v-1),g=p+(c+l)*(v<<1),v>>=1)),w===f)g+=4;else{var A=t[u+3*w],_=t[u+3*w+1],S=t[u+3*w+2];o[g++]=A,o[g++]=_,o[g++]=S,o[g++]=255}--h}}}}catch(t){}},11:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function r(t,e){for(var r,n="",o=0,i=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)r=t.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(i===s-1||1===a);else if(i!==s-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){-1===u?(n="",o=0):o=(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),i=s,a=0;continue}}else if(2===n.length||1===n.length){n="",o=0,i=s,a=0;continue}e&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+t.slice(i+1,s):n=t.slice(i+1,s),o=s-i-1;i=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var t,n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===t&&(t=process.cwd()),a=t),e(a),0!==a.length&&(n=a+"/"+n,o=47===a.charCodeAt(0))}return n=r(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(t){if(e(t),0===t.length)return".";var n=47===t.charCodeAt(0),o=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!n)).length||n||(t="."),t.length>0&&o&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,r=0;r<arguments.length;++r){var o=arguments[r];e(o),o.length>0&&(void 0===t?t=o:t+="/"+o)}return void 0===t?".":n.normalize(t)},relative:function(t,r){if(e(t),e(r),t===r)return"";if((t=n.resolve(t))===(r=n.resolve(r)))return"";for(var o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var i=t.length,a=i-o,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var u=r.length-s,f=a<u?a:u,c=-1,l=0;l<=f;++l){if(l===f){if(u>f){if(47===r.charCodeAt(s+l))return r.slice(s+l+1);if(0===l)return r.slice(s+l)}else a>f&&(47===t.charCodeAt(o+l)?c=l:0===l&&(c=0));break}var h=t.charCodeAt(o+l);if(h!==r.charCodeAt(s+l))break;47===h&&(c=l)}var p="";for(l=o+c+1;l<=i;++l)l!==i&&47!==t.charCodeAt(l)||(0===p.length?p+="..":p+="/..");return p.length>0?p+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var r=t.charCodeAt(0),n=47===r,o=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(r=t.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?n?"/":".":n&&1===o?"//":t.slice(0,o)},basename:function(t,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');e(t);var n,o=0,i=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var s=r.length-1,u=-1;for(n=t.length-1;n>=0;--n){var f=t.charCodeAt(n);if(47===f){if(!a){o=n+1;break}}else-1===u&&(a=!1,u=n+1),s>=0&&(f===r.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=u))}return o===i?i=u:-1===i&&(i=t.length),t.slice(o,i)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!a){o=n+1;break}}else-1===i&&(a=!1,i=n+1);return-1===i?"":t.slice(o,i)},extname:function(t){e(t);for(var r=-1,n=0,o=-1,i=!0,a=0,s=t.length-1;s>=0;--s){var u=t.charCodeAt(s);if(47!==u)-1===o&&(i=!1,o=s+1),46===u?-1===r?r=s:1!==a&&(a=1):-1!==r&&(a=-1);else if(!i){n=s+1;break}}return-1===r||-1===o||0===a||1===a&&r===o-1&&r===n+1?"":t.slice(r,o)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+"/"+n:n}(0,t)},parse:function(t){e(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return r;var n,o=t.charCodeAt(0),i=47===o;i?(r.root="/",n=1):n=0;for(var a=-1,s=0,u=-1,f=!0,c=t.length-1,l=0;c>=n;--c)if(47!==(o=t.charCodeAt(c)))-1===u&&(f=!1,u=c+1),46===o?-1===a?a=c:1!==l&&(l=1):-1!==a&&(l=-1);else if(!f){s=c+1;break}return-1===a||-1===u||0===l||1===l&&a===u-1&&a===s+1?-1!==u&&(r.base=r.name=0===s&&i?t.slice(1,u):t.slice(s,u)):(0===s&&i?(r.name=t.slice(1,a),r.base=t.slice(1,u)):(r.name=t.slice(s,a),r.base=t.slice(s,u)),r.ext=t.slice(a,u)),s>0?r.dir=t.slice(0,s-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,t.exports=n},25:(t,e,r)=>{var n=r(26);function o(t,e,r){t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var o=!1,i=!1,a=[],s=!1,u=new n;function f(){for(;a.length&&!u.paused;){var t=a.shift();if(null===t)return u.emit("end");u.emit("data",t)}}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(r&&!1===r.autoDestroy),u.write=function(e){return t.call(this,e),!u.paused},u.queue=u.push=function(t){return s||(null===t&&(s=!0),a.push(t),f()),u},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&process.nextTick((function(){u.destroy()}))})),u.end=function(t){if(!o)return o=!0,arguments.length&&u.write(t),u.writable=!1,e.call(u),!u.readable&&u.autoDestroy&&u.destroy(),u},u.destroy=function(){if(!i)return i=!0,o=!0,a.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),f(),u.paused||u.emit("drain"),u},u}t.exports=o,o.through=o},24:t=>{"use strict";t.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,o=t[0],i=t[0],a=1;a<n;++a)if(i=o,e(o=t[a],i)){if(a===r){r++;continue}t[r++]=o}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],o=t[0],i=1;i<r;++i,o=n)if(o=n,(n=t[i])!==o){if(i===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},577:t=>{t.exports=XMLHttpRequest},589:()=>{},587:()=>{},26:()=>{}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n=r(571);return n.default})()));