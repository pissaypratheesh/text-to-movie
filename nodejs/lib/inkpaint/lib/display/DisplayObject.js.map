{"version":3,"file":"DisplayObject.js","names":["DisplayObject","EventEmitter","constructor","TransformClass","settings","TRANSFORM_MODE","STATIC","TransformStatic","Transform","tempDisplayObjectParent","transform","alpha","visible","renderable","parent","worldAlpha","filterArea","initScale","Point","filters","_enabledFilters","_bounds","Bounds","_boundsID","_lastBoundsID","_boundsRect","_localBoundsRect","_mask","_blur","_fxaa","maskEnabled","destroyed","id","uuidvx","_tempDisplayObjectParent","updateTransform","updateID","_recursivePostUpdateTransform","getBounds","skipUpdate","rect","calculateBounds","Rectangle","getRectangle","getLocalBounds","transformRef","parentRef","bounds","toGlobal","position","point","displayObjectUpdateTransform","worldTransform","apply","getGlobalPosition","x","y","toLocal","from","applyInverse","copyFromProxy","proxyObj","copyFunc","key","scale","copy","anchor","substitute","index","getChildIndex","removeChild","addChildAt","destroy","renderWebGL","renderer","renderCanvas","setParent","container","addChild","Error","setTransform","scaleX","scaleY","rotation","skewX","skewY","pivotX","pivotY","skew","pivot","setScaleToInit","copyScaleAndInit","attr","attrs","scaleInitX","scaleInitY","val","getAttr","value","localTransform","worldVisible","item","mask","isMask","hasFilters","length","blur","BlurFilter","fxaa","FXAAFilter","removeAllListeners","_currentBounds","interactive","interactiveChildren","prototype"],"sources":["../../src/display/DisplayObject.js"],"sourcesContent":["import EventEmitter from \"eventemitter3\";\nimport { TRANSFORM_MODE } from \"../const\";\nimport Bounds from \"./Bounds\";\nimport settings from \"../settings\";\nimport Transform from \"./Transform\";\nimport { uuidvx } from \"../utils\";\nimport { Rectangle, Point } from \"../math\";\nimport TransformStatic from \"./TransformStatic\";\nimport FXAAFilter from \"../filters/fxaa/FXAAFilter\";\nimport BlurFilter from \"../filters/blur/BlurFilter\";\n\nexport default class DisplayObject extends EventEmitter {\n  constructor() {\n    super();\n\n    const TransformClass =\n      settings.TRANSFORM_MODE === TRANSFORM_MODE.STATIC\n        ? TransformStatic\n        : Transform;\n\n    this.tempDisplayObjectParent = null;\n    this.transform = new TransformClass();\n    this.alpha = 1;\n    this.visible = true;\n    this.renderable = true;\n    this.parent = null;\n    this.worldAlpha = 1;\n    this.filterArea = null;\n    this.initScale = new Point(1, 1);\n\n    this.filters = null;\n    this._enabledFilters = null;\n    this._bounds = new Bounds();\n    this._boundsID = 0;\n    this._lastBoundsID = -1;\n    this._boundsRect = null;\n    this._localBoundsRect = null;\n    this._mask = null;\n    this._blur = 0;\n    this._fxaa = false;\n    this.maskEnabled = true;\n    this.destroyed = false;\n    this.id = uuidvx();\n  }\n\n  get _tempDisplayObjectParent() {\n    if (this.tempDisplayObjectParent === null) {\n      this.tempDisplayObjectParent = new DisplayObject();\n    }\n    return this.tempDisplayObjectParent;\n  }\n\n  updateTransform() {\n    this.transform.updateTransform(this.parent.transform);\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n    this._bounds.updateID++;\n  }\n\n  _recursivePostUpdateTransform() {\n    if (this.parent) {\n      this.parent._recursivePostUpdateTransform();\n      this.transform.updateTransform(this.parent.transform);\n    } else {\n      this.transform.updateTransform(this._tempDisplayObjectParent.transform);\n    }\n  }\n\n  getBounds(skipUpdate, rect) {\n    if (!skipUpdate) {\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.updateTransform();\n        this.parent = null;\n      } else {\n        this._recursivePostUpdateTransform();\n        this.updateTransform();\n      }\n    }\n\n    if (this._boundsID !== this._lastBoundsID && this.maskEnabled) {\n      this.calculateBounds();\n    }\n\n    if (!rect) {\n      if (!this._boundsRect) {\n        this._boundsRect = new Rectangle();\n      }\n      rect = this._boundsRect;\n    }\n\n    return this._bounds.getRectangle(rect);\n  }\n\n  getLocalBounds(rect) {\n    const transformRef = this.transform;\n    const parentRef = this.parent;\n    this.parent = null;\n    this.transform = this._tempDisplayObjectParent.transform;\n\n    if (!rect) {\n      if (!this._localBoundsRect) {\n        this._localBoundsRect = new Rectangle();\n      }\n      rect = this._localBoundsRect;\n    }\n\n    const bounds = this.getBounds(false, rect);\n    this.parent = parentRef;\n    this.transform = transformRef;\n    return bounds;\n  }\n\n  toGlobal(position, point, skipUpdate = false) {\n    if (!skipUpdate) {\n      this._recursivePostUpdateTransform();\n\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.displayObjectUpdateTransform();\n        this.parent = null;\n      } else {\n        this.displayObjectUpdateTransform();\n      }\n    }\n\n    return this.worldTransform.apply(position, point);\n  }\n\n  getGlobalPosition(point, skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this.position, point, skipUpdate);\n    } else {\n      point.x = this.position.x;\n      point.y = this.position.y;\n    }\n    return point;\n  }\n\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n\n    if (!skipUpdate) {\n      this._recursivePostUpdateTransform();\n\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.displayObjectUpdateTransform();\n        this.parent = null;\n      } else {\n        this.displayObjectUpdateTransform();\n      }\n    }\n\n    return this.worldTransform.applyInverse(position, point);\n  }\n\n  copyFromProxy(proxyObj) {\n    const copyFunc = key => {\n      if (proxyObj[key] !== null) {\n        this[key] = proxyObj[key];\n      }\n    };\n\n    copyFunc(\"x\");\n    copyFunc(\"y\");\n    copyFunc(\"text\");\n    copyFunc(\"style\");\n    copyFunc(\"width\");\n    copyFunc(\"height\");\n    copyFunc(\"alpha\");\n    copyFunc(\"rotation\");\n    copyFunc(\"blendMode\");\n    this.scale.copy(proxyObj.scale);\n    this.anchor.copy(proxyObj.anchor);\n  }\n\n  substitute(proxyObj) {\n    this.copyFromProxy(proxyObj);\n    const { parent } = proxyObj;\n\n    if (parent) {\n      const index = parent.getChildIndex(proxyObj);\n      parent.removeChild(proxyObj);\n      parent.addChildAt(this, index);\n    }\n\n    proxyObj.destroy();\n    proxyObj = null;\n  }\n\n  renderWebGL(renderer) {\n    // OVERWRITE;\n  }\n\n  renderCanvas(renderer) {\n    // OVERWRITE;\n  }\n\n  setParent(container) {\n    if (!container || !container.addChild) {\n      throw new Error(\"setParent: Argument must be a Container\");\n    }\n    container.addChild(this);\n    return container;\n  }\n\n  setTransform(\n    x = 0,\n    y = 0,\n    scaleX = 1,\n    scaleY = 1,\n    rotation = 0,\n    skewX = 0,\n    skewY = 0,\n    pivotX = 0,\n    pivotY = 0\n  ) {\n    this.position.x = x;\n    this.position.y = y;\n    this.scale.x = !scaleX ? 1 : scaleX;\n    this.scale.y = !scaleY ? 1 : scaleY;\n    this.rotation = rotation;\n    this.skew.x = skewX;\n    this.skew.y = skewY;\n    this.pivot.x = pivotX;\n    this.pivot.y = pivotY;\n\n    return this;\n  }\n\n  setScaleToInit() {\n    this.initScale.copy(this.scale);\n  }\n\n  copyScaleAndInit(scale) {\n    this.scale.copy(scale);\n    this.initScale.copy(scale);\n  }\n\n  attr(attrs) {\n    const scaleInitX = this.initScale.x;\n    const scaleInitY = this.initScale.y;\n\n    for (let key in attrs) {\n      const val = attrs[key];\n\n      switch (key) {\n        case \"scale\":\n          this.scale.x = val * scaleInitX;\n          this.scale.y = val * scaleInitY;\n          break;\n\n        case \"skew\":\n          this.skew.x = val;\n          this.skew.y = val;\n          break;\n\n        case \"rotate\":\n          this.rotation = val;\n          break;\n\n        default:\n          this[key] = val;\n      }\n    }\n  }\n\n  getAttr(key) {\n    let attr;\n    switch (key) {\n      case \"scale\":\n        attr = this.scale.x;\n        break;\n\n      case \"rotate\":\n        attr = this.rotation;\n        break;\n\n      default:\n        attr = this[key];\n    }\n\n    return attr;\n  }\n\n  get x() {\n    return this.position.x;\n  }\n\n  set x(value) {\n    this.transform.position.x = value;\n  }\n\n  get y() {\n    return this.position.y;\n  }\n\n  set y(value) {\n    this.transform.position.y = value;\n  }\n\n  get worldTransform() {\n    return this.transform.worldTransform;\n  }\n\n  get localTransform() {\n    return this.transform.localTransform;\n  }\n\n  get position() {\n    return this.transform.position;\n  }\n\n  set position(value) {\n    this.transform.position.copy(value);\n  }\n\n  get scale() {\n    return this.transform.scale;\n  }\n\n  set scale(value) {\n    this.transform.scale.copy(value);\n  }\n\n  get pivot() {\n    return this.transform.pivot;\n  }\n\n  set pivot(value) {\n    this.transform.pivot.copy(value);\n  }\n\n  get skew() {\n    return this.transform.skew;\n  }\n\n  set skew(value) {\n    this.transform.skew.copy(value);\n  }\n\n  get rotation() {\n    return this.transform.rotation;\n  }\n\n  set rotation(value) {\n    this.transform.rotation = value;\n  }\n\n  get worldVisible() {\n    let item = this;\n\n    do {\n      if (!item.visible) {\n        return false;\n      }\n\n      item = item.parent;\n    } while (item);\n\n    return true;\n  }\n\n  get mask() {\n    return this._mask;\n  }\n\n  set mask(value) {\n    if (this._mask) {\n      this._mask.renderable = true;\n      this._mask.isMask = false;\n    }\n\n    this._mask = value;\n\n    if (this._mask) {\n      this._mask.renderable = false;\n      this._mask.isMask = true;\n    }\n  }\n\n  hasFilters() {\n    if (this.filters && this.filters.length) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  set blur(blur = 0) {\n    this._blur = blur;\n\n    if (blur <= 0) {\n      this.filters = null;\n      return;\n    }\n\n    if (!this.filters) {\n      this.filters = [new BlurFilter()];\n    }\n\n    this.filters[0].blur = blur;\n  }\n\n  set fxaa(fxaa) {\n    if (fxaa === false) {\n      this.filters = null;\n      return;\n    }\n\n    if (!this.filters) {\n      this.filters = [new FXAAFilter()];\n    }\n  }\n\n  get fxaa() {\n    return this._fxaa;\n  }\n\n  get blur() {\n    return this._blur;\n  }\n\n  destroy() {\n    if (this.destroyed) return;\n\n    this.removeAllListeners();\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n\n    this.blur = 0;\n    this.fxaa = false;\n    this.filters = null;\n    this.transform = null;\n    this.initScale = null;\n    this.parent = null;\n    this._bounds = null;\n    this._currentBounds = null;\n    this._mask = null;\n\n    this.filterArea = null;\n    this.interactive = false;\n    this.interactiveChildren = false;\n    this.destroyed = true;\n  }\n}\n\n// performance increase to avoid using call.. (10x faster)\nDisplayObject.prototype.displayObjectUpdateTransform =\n  DisplayObject.prototype.updateTransform;\n"],"mappings":"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"}