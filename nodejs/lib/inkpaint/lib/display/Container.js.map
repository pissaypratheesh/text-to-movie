{"version":3,"file":"Container.js","names":["Container","DisplayObject","constructor","children","onChildrenChange","addChild","child","argumentsLength","arguments","length","i","parent","removeChild","transform","_parentID","push","_boundsID","emit","addChildAt","index","Error","splice","swapChildren","child2","index1","getChildIndex","index2","indexOf","setChildIndex","currentIndex","removeItems","getChildAt","removeChildAt","removeChildren","beginIndex","endIndex","begin","end","range","removed","RangeError","removeAllChildren","updateTransform","worldAlpha","alpha","j","visible","calculateBounds","_bounds","clear","_calculateBounds","renderable","_mask","addBoundsMask","filterArea","addBoundsArea","addBounds","_lastBoundsID","renderWebGL","renderer","hasFilters","_renderAdvancedWebGL","_renderWebGL","flush","filters","mask","_enabledFilters","enabled","filterManager","pushFilter","maskManager","pushMask","popMask","popFilter","_renderCanvas","renderCanvas","destroy","options","destroyed","destroyChildren","oldChildren","width","scale","x","getLocalBounds","value","_width","height","y","_height","prototype","containerUpdateTransform"],"sources":["../../src/display/Container.js"],"sourcesContent":["import { removeItems } from \"../utils\";\nimport DisplayObject from \"./DisplayObject\";\n\nexport default class Container extends DisplayObject {\n  constructor() {\n    super();\n    this.children = [];\n  }\n\n  onChildrenChange() {\n    /* empty */\n  }\n\n  addChild(child) {\n    const argumentsLength = arguments.length;\n\n    if (argumentsLength > 1) {\n      for (let i = 0; i < argumentsLength; i++) {\n        this.addChild(arguments[i]);\n      }\n    } else {\n      if (child.parent) {\n        child.parent.removeChild(child);\n      }\n\n      child.parent = this;\n      child.transform._parentID = -1;\n      this.children.push(child);\n      this._boundsID++;\n\n      this.onChildrenChange(this.children.length - 1);\n      child.emit(\"added\", this);\n    }\n\n    return child;\n  }\n\n  addChildAt(child, index) {\n    if (index < 0 || index > this.children.length) {\n      throw new Error(\n        `${child}addChildAt: The index ${index} supplied is out of bounds ${this.children.length}`\n      );\n    }\n\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n\n    child.parent = this;\n    child.transform._parentID = -1;\n\n    this.children.splice(index, 0, child);\n    this._boundsID++;\n    this.onChildrenChange(index);\n    child.emit(\"added\", this);\n\n    return child;\n  }\n\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n\n    this.children[index1] = child2;\n    this.children[index2] = child;\n    this.onChildrenChange(index1 < index2 ? index1 : index2);\n  }\n\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n\n    if (index === -1) {\n      throw new Error(\n        \"The supplied DisplayObject must be a child of the caller\"\n      );\n    }\n\n    return index;\n  }\n\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(\n        `The index ${index} supplied is out of bounds ${this.children.length}`\n      );\n    }\n\n    const currentIndex = this.getChildIndex(child);\n\n    removeItems(this.children, currentIndex, 1); // remove from old position\n    this.children.splice(index, 0, child); // add at new position\n    this.onChildrenChange(index);\n  }\n\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  }\n\n  removeChild(child) {\n    const argumentsLength = arguments.length;\n\n    if (argumentsLength > 1) {\n      for (let i = 0; i < argumentsLength; i++) {\n        this.removeChild(arguments[i]);\n      }\n    } else {\n      const index = this.children.indexOf(child);\n\n      if (index === -1) return null;\n\n      child.parent = null;\n      // ensure child transform will be recalculated\n      child.transform._parentID = -1;\n      removeItems(this.children, index, 1);\n      this._boundsID++;\n      this.onChildrenChange(index);\n      child.emit(\"removed\", this);\n    }\n\n    return child;\n  }\n\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    child.parent = null;\n    child.transform._parentID = -1;\n    removeItems(this.children, index, 1);\n    this._boundsID++;\n    this.onChildrenChange(index);\n    child.emit(\"removed\", this);\n\n    return child;\n  }\n\n  removeChildren(beginIndex = 0, endIndex) {\n    const begin = beginIndex;\n    const end = typeof endIndex === \"number\" ? endIndex : this.children.length;\n    const range = end - begin;\n    let removed;\n\n    if (range > 0 && range <= end) {\n      removed = this.children.splice(begin, range);\n\n      for (let i = 0; i < removed.length; ++i) {\n        removed[i].parent = null;\n        if (removed[i].transform) {\n          removed[i].transform._parentID = -1;\n        }\n      }\n\n      this._boundsID++;\n      this.onChildrenChange(beginIndex);\n\n      for (let i = 0; i < removed.length; ++i) {\n        removed[i].emit(\"removed\", this);\n      }\n\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return [];\n    }\n\n    throw new RangeError(\n      \"removeChildren: numeric values are outside the acceptable range.\"\n    );\n  }\n\n  removeAllChildren() {\n    for (let i = this.children.length - 1; i >= 0; i--) {\n      this.removeChild(this.children[i]);\n    }\n  }\n\n  updateTransform() {\n    this._boundsID++;\n    this.transform.updateTransform(this.parent.transform);\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n\n    for (let i = 0, j = this.children.length; i < j; ++i) {\n      const child = this.children[i];\n\n      if (child.visible) {\n        child.updateTransform();\n      }\n    }\n  }\n\n  calculateBounds() {\n    this._bounds.clear();\n    this._calculateBounds();\n\n    for (let i = 0; i < this.children.length; i++) {\n      const child = this.children[i];\n      if (!child.visible || !child.renderable) {\n        continue;\n      }\n\n      child.calculateBounds();\n      if (child._mask) {\n        child._mask.calculateBounds();\n        this._bounds.addBoundsMask(child._bounds, child._mask._bounds);\n      } else if (child.filterArea) {\n        this._bounds.addBoundsArea(child._bounds, child.filterArea);\n      } else {\n        this._bounds.addBounds(child._bounds);\n      }\n    }\n\n    this._lastBoundsID = this._boundsID;\n  }\n\n  _calculateBounds() {\n    // FILL IN//\n  }\n\n  renderWebGL(renderer) {\n    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) return;\n\n    if (this._mask || this.hasFilters()) {\n      this._renderAdvancedWebGL(renderer);\n    } else {\n      this._renderWebGL(renderer);\n\n      let i, j;\n      for (i = 0, j = this.children.length; i < j; ++i) {\n        this.children[i].renderWebGL(renderer);\n      }\n    }\n  }\n\n  _renderAdvancedWebGL(renderer) {\n    renderer.flush();\n\n    const filters = this.filters;\n    const mask = this._mask;\n\n    if (filters) {\n      if (!this._enabledFilters) {\n        this._enabledFilters = [];\n      }\n\n      this._enabledFilters.length = 0;\n\n      for (let i = 0; i < filters.length; i++) {\n        if (filters[i].enabled) {\n          this._enabledFilters.push(filters[i]);\n        }\n      }\n\n      if (this._enabledFilters.length) {\n        renderer.filterManager.pushFilter(this, this._enabledFilters);\n      }\n    }\n\n    if (mask) {\n      renderer.maskManager.pushMask(this, this._mask);\n    }\n\n    this._renderWebGL(renderer);\n    for (let i = 0, j = this.children.length; i < j; i++) {\n      this.children[i].renderWebGL(renderer);\n    }\n\n    renderer.flush();\n\n    if (mask) {\n      renderer.maskManager.popMask(this, this._mask);\n    }\n\n    if (filters && this._enabledFilters && this._enabledFilters.length) {\n      renderer.filterManager.popFilter();\n    }\n  }\n\n  _renderWebGL(renderer) {\n    // this is where content itself gets rendered...\n  }\n\n  _renderCanvas(renderer) {\n    // this is where content itself gets rendered...\n  }\n\n  renderCanvas(renderer) {\n    // if not visible or the alpha is 0 then no need to render this\n    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n      return;\n    }\n\n    if (this._mask) {\n      renderer.maskManager.pushMask(this._mask);\n    }\n\n    this._renderCanvas(renderer);\n    for (let i = 0, j = this.children.length; i < j; ++i) {\n      this.children[i].renderCanvas(renderer);\n    }\n\n    if (this._mask) {\n      renderer.maskManager.popMask(renderer);\n    }\n  }\n\n  destroy(options) {\n    if (this.destroyed) return;\n\n    super.destroy();\n    const destroyChildren =\n      typeof options === \"boolean\" ? options : options && options.children;\n    const oldChildren = this.removeChildren(0, this.children.length);\n\n    if (destroyChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n  }\n\n  destroyChildren(options) {\n    const oldChildren = this.removeChildren(0, this.children.length);\n    for (let i = 0; i < oldChildren.length; ++i) {\n      oldChildren[i].destroy(options);\n    }\n  }\n\n  get width() {\n    return this.scale.x * this.getLocalBounds().width;\n  }\n\n  set width(value) {\n    const width = this.getLocalBounds().width;\n\n    if (width !== 0) {\n      this.scale.x = value / width;\n    } else {\n      this.scale.x = 1;\n    }\n\n    this._width = value;\n  }\n\n  get height() {\n    return this.scale.y * this.getLocalBounds().height;\n  }\n\n  set height(value) {\n    const height = this.getLocalBounds().height;\n\n    if (height !== 0) {\n      this.scale.y = value / height;\n    } else {\n      this.scale.y = 1;\n    }\n\n    this._height = value;\n  }\n}\n\n// performance increase to avoid using call.. (10x faster)\nContainer.prototype.containerUpdateTransform =\n  Container.prototype.updateTransform;\n"],"mappings":"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"}