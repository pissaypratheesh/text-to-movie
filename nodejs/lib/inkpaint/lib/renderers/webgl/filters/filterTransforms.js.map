{"version":3,"file":"filterTransforms.js","names":["calculateScreenSpaceMatrix","outputMatrix","filterArea","textureSize","mappedMatrix","identity","translate","x","width","y","height","scale","calculateNormalizedScreenSpaceMatrix","translateScaleX","translateScaleY","calculateSpriteMatrix","sprite","orig","_texture","set","worldTransform","copy","Matrix","TEMP_MATRIX","invert","prepend","anchor"],"sources":["../../../../src/renderers/webgl/filters/filterTransforms.js"],"sourcesContent":["import { Matrix } from \"../../../math\";\n\nexport function calculateScreenSpaceMatrix(\n  outputMatrix,\n  filterArea,\n  textureSize\n) {\n  const mappedMatrix = outputMatrix.identity();\n  mappedMatrix.translate(\n    filterArea.x / textureSize.width,\n    filterArea.y / textureSize.height\n  );\n  mappedMatrix.scale(textureSize.width, textureSize.height);\n\n  return mappedMatrix;\n}\n\nexport function calculateNormalizedScreenSpaceMatrix(\n  outputMatrix,\n  filterArea,\n  textureSize\n) {\n  const mappedMatrix = outputMatrix.identity();\n  mappedMatrix.translate(\n    filterArea.x / textureSize.width,\n    filterArea.y / textureSize.height\n  );\n\n  const translateScaleX = textureSize.width / filterArea.width;\n  const translateScaleY = textureSize.height / filterArea.height;\n  mappedMatrix.scale(translateScaleX, translateScaleY);\n\n  return mappedMatrix;\n}\n\nexport function calculateSpriteMatrix(\n  outputMatrix,\n  filterArea,\n  textureSize,\n  sprite\n) {\n  const orig = sprite._texture.orig;\n  const mappedMatrix = outputMatrix.set(\n    textureSize.width,\n    0,\n    0,\n    textureSize.height,\n    filterArea.x,\n    filterArea.y\n  );\n  const worldTransform = sprite.worldTransform.copy(Matrix.TEMP_MATRIX);\n\n  worldTransform.invert();\n  mappedMatrix.prepend(worldTransform);\n  mappedMatrix.scale(1.0 / orig.width, 1.0 / orig.height);\n  mappedMatrix.translate(sprite.anchor.x, sprite.anchor.y);\n\n  return mappedMatrix;\n}\n"],"mappings":";;;;;;;;AAAA;AAEO,SAASA,0BAA0B,CACxCC,YAAY,EACZC,UAAU,EACVC,WAAW,EACX;EACA,IAAMC,YAAY,GAAGH,YAAY,CAACI,QAAQ,EAAE;EAC5CD,YAAY,CAACE,SAAS,CACpBJ,UAAU,CAACK,CAAC,GAAGJ,WAAW,CAACK,KAAK,EAChCN,UAAU,CAACO,CAAC,GAAGN,WAAW,CAACO,MAAM,CAClC;EACDN,YAAY,CAACO,KAAK,CAACR,WAAW,CAACK,KAAK,EAAEL,WAAW,CAACO,MAAM,CAAC;EAEzD,OAAON,YAAY;AACrB;AAEO,SAASQ,oCAAoC,CAClDX,YAAY,EACZC,UAAU,EACVC,WAAW,EACX;EACA,IAAMC,YAAY,GAAGH,YAAY,CAACI,QAAQ,EAAE;EAC5CD,YAAY,CAACE,SAAS,CACpBJ,UAAU,CAACK,CAAC,GAAGJ,WAAW,CAACK,KAAK,EAChCN,UAAU,CAACO,CAAC,GAAGN,WAAW,CAACO,MAAM,CAClC;EAED,IAAMG,eAAe,GAAGV,WAAW,CAACK,KAAK,GAAGN,UAAU,CAACM,KAAK;EAC5D,IAAMM,eAAe,GAAGX,WAAW,CAACO,MAAM,GAAGR,UAAU,CAACQ,MAAM;EAC9DN,YAAY,CAACO,KAAK,CAACE,eAAe,EAAEC,eAAe,CAAC;EAEpD,OAAOV,YAAY;AACrB;AAEO,SAASW,qBAAqB,CACnCd,YAAY,EACZC,UAAU,EACVC,WAAW,EACXa,MAAM,EACN;EACA,IAAMC,IAAI,GAAGD,MAAM,CAACE,QAAQ,CAACD,IAAI;EACjC,IAAMb,YAAY,GAAGH,YAAY,CAACkB,GAAG,CACnChB,WAAW,CAACK,KAAK,EACjB,CAAC,EACD,CAAC,EACDL,WAAW,CAACO,MAAM,EAClBR,UAAU,CAACK,CAAC,EACZL,UAAU,CAACO,CAAC,CACb;EACD,IAAMW,cAAc,GAAGJ,MAAM,CAACI,cAAc,CAACC,IAAI,CAACC,YAAM,CAACC,WAAW,CAAC;EAErEH,cAAc,CAACI,MAAM,EAAE;EACvBpB,YAAY,CAACqB,OAAO,CAACL,cAAc,CAAC;EACpChB,YAAY,CAACO,KAAK,CAAC,GAAG,GAAGM,IAAI,CAACT,KAAK,EAAE,GAAG,GAAGS,IAAI,CAACP,MAAM,CAAC;EACvDN,YAAY,CAACE,SAAS,CAACU,MAAM,CAACU,MAAM,CAACnB,CAAC,EAAES,MAAM,CAACU,MAAM,CAACjB,CAAC,CAAC;EAExD,OAAOL,YAAY;AACrB"}