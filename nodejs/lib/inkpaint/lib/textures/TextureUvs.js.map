{"version":3,"file":"TextureUvs.js","names":["TextureUvs","constructor","x0","y0","x1","y1","x2","y2","x3","y3","uvsUint32","Uint32Array","set","frame","baseFrame","rotate","tw","width","th","height","w2","h2","cX","x","cY","y","GroupD8","add","NW","uX","uY","Math","round"],"sources":["../../src/textures/TextureUvs.js"],"sourcesContent":["import GroupD8 from \"../math/GroupD8\";\n\nexport default class TextureUvs {\n  constructor() {\n    this.x0 = 0;\n    this.y0 = 0;\n    this.x1 = 1;\n    this.y1 = 0;\n    this.x2 = 1;\n    this.y2 = 1;\n    this.x3 = 0;\n    this.y3 = 1;\n    this.uvsUint32 = new Uint32Array(4);\n  }\n\n  set(frame, baseFrame, rotate) {\n    const tw = baseFrame.width;\n    const th = baseFrame.height;\n\n    if (rotate) {\n      // width and height div 2 div baseFrame size\n      const w2 = frame.width / 2 / tw;\n      const h2 = frame.height / 2 / th;\n\n      // coordinates of center\n      const cX = frame.x / tw + w2;\n      const cY = frame.y / th + h2;\n\n      rotate = GroupD8.add(rotate, GroupD8.NW); // NW is top-left corner\n      this.x0 = cX + w2 * GroupD8.uX(rotate);\n      this.y0 = cY + h2 * GroupD8.uY(rotate);\n\n      rotate = GroupD8.add(rotate, 2); // rotate 90 degrees clockwise\n      this.x1 = cX + w2 * GroupD8.uX(rotate);\n      this.y1 = cY + h2 * GroupD8.uY(rotate);\n\n      rotate = GroupD8.add(rotate, 2);\n      this.x2 = cX + w2 * GroupD8.uX(rotate);\n      this.y2 = cY + h2 * GroupD8.uY(rotate);\n\n      rotate = GroupD8.add(rotate, 2);\n      this.x3 = cX + w2 * GroupD8.uX(rotate);\n      this.y3 = cY + h2 * GroupD8.uY(rotate);\n    } else {\n      this.x0 = frame.x / tw;\n      this.y0 = frame.y / th;\n\n      this.x1 = (frame.x + frame.width) / tw;\n      this.y1 = frame.y / th;\n\n      this.x2 = (frame.x + frame.width) / tw;\n      this.y2 = (frame.y + frame.height) / th;\n\n      this.x3 = frame.x / tw;\n      this.y3 = (frame.y + frame.height) / th;\n    }\n\n    this.uvsUint32[0] =\n      ((Math.round(this.y0 * 65535) & 0xffff) << 16) |\n      (Math.round(this.x0 * 65535) & 0xffff);\n    this.uvsUint32[1] =\n      ((Math.round(this.y1 * 65535) & 0xffff) << 16) |\n      (Math.round(this.x1 * 65535) & 0xffff);\n    this.uvsUint32[2] =\n      ((Math.round(this.y2 * 65535) & 0xffff) << 16) |\n      (Math.round(this.x2 * 65535) & 0xffff);\n    this.uvsUint32[3] =\n      ((Math.round(this.y3 * 65535) & 0xffff) << 16) |\n      (Math.round(this.x3 * 65535) & 0xffff);\n  }\n}\n"],"mappings":"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"}