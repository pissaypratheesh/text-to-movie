{"version":3,"file":"TickerListener.js","names":["TickerListener","constructor","fn","context","priority","once","next","previous","destroyed","match","emit","deltaTime","call","redirect","destroy","connect","hard"],"sources":["../../src/ticker/TickerListener.js"],"sourcesContent":["export default class TickerListener {\n  constructor(fn, context = null, priority = 0, once = false) {\n    this.fn = fn;\n    this.context = context;\n    this.priority = priority;\n    this.once = once;\n    this.next = null;\n    this.previous = null;\n\n    this.destroyed = false;\n  }\n\n  match(fn, context) {\n    context = context || null;\n\n    return this.fn === fn && this.context === context;\n  }\n\n  emit(deltaTime) {\n    if (this.fn) {\n      if (this.context) {\n        this.fn.call(this.context, deltaTime);\n      } else {\n        this.fn(deltaTime);\n      }\n    }\n\n    const redirect = this.next;\n\n    if (this.once) {\n      this.destroy(true);\n    }\n\n    if (this.destroyed) {\n      this.next = null;\n    }\n\n    return redirect;\n  }\n\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n\n  destroy(hard = false) {\n    if (this.destroyed) return;\n\n    this.destroyed = true;\n    this.fn = null;\n    this.context = null;\n\n    // Disconnect, hook up next and previous\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n\n    // Redirect to the next item\n    const redirect = this.next;\n\n    // Remove references\n    this.next = hard ? null : redirect;\n    this.previous = null;\n\n    return redirect;\n  }\n}\n"],"mappings":";;;;;;AAAe,MAAMA,cAAc,CAAC;EAClCC,WAAW,CAACC,EAAE,EAAEC,OAAO,EAASC,QAAQ,EAAMC,IAAI,EAAU;IAAA,IAA5CF,OAAO;MAAPA,OAAO,GAAG,IAAI;IAAA;IAAA,IAAEC,QAAQ;MAARA,QAAQ,GAAG,CAAC;IAAA;IAAA,IAAEC,IAAI;MAAJA,IAAI,GAAG,KAAK;IAAA;IACxD,IAAI,CAACH,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,IAAI,GAAG,IAAI;IAChB,IAAI,CAACC,QAAQ,GAAG,IAAI;IAEpB,IAAI,CAACC,SAAS,GAAG,KAAK;EACxB;EAEAC,KAAK,CAACP,EAAE,EAAEC,OAAO,EAAE;IACjBA,OAAO,GAAGA,OAAO,IAAI,IAAI;IAEzB,OAAO,IAAI,CAACD,EAAE,KAAKA,EAAE,IAAI,IAAI,CAACC,OAAO,KAAKA,OAAO;EACnD;EAEAO,IAAI,CAACC,SAAS,EAAE;IACd,IAAI,IAAI,CAACT,EAAE,EAAE;MACX,IAAI,IAAI,CAACC,OAAO,EAAE;QAChB,IAAI,CAACD,EAAE,CAACU,IAAI,CAAC,IAAI,CAACT,OAAO,EAAEQ,SAAS,CAAC;MACvC,CAAC,MAAM;QACL,IAAI,CAACT,EAAE,CAACS,SAAS,CAAC;MACpB;IACF;IAEA,IAAME,QAAQ,GAAG,IAAI,CAACP,IAAI;IAE1B,IAAI,IAAI,CAACD,IAAI,EAAE;MACb,IAAI,CAACS,OAAO,CAAC,IAAI,CAAC;IACpB;IAEA,IAAI,IAAI,CAACN,SAAS,EAAE;MAClB,IAAI,CAACF,IAAI,GAAG,IAAI;IAClB;IAEA,OAAOO,QAAQ;EACjB;EAEAE,OAAO,CAACR,QAAQ,EAAE;IAChB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxB,IAAIA,QAAQ,CAACD,IAAI,EAAE;MACjBC,QAAQ,CAACD,IAAI,CAACC,QAAQ,GAAG,IAAI;IAC/B;IACA,IAAI,CAACD,IAAI,GAAGC,QAAQ,CAACD,IAAI;IACzBC,QAAQ,CAACD,IAAI,GAAG,IAAI;EACtB;EAEAQ,OAAO,CAACE,IAAI,EAAU;IAAA,IAAdA,IAAI;MAAJA,IAAI,GAAG,KAAK;IAAA;IAClB,IAAI,IAAI,CAACR,SAAS,EAAE;IAEpB,IAAI,CAACA,SAAS,GAAG,IAAI;IACrB,IAAI,CAACN,EAAE,GAAG,IAAI;IACd,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;IACA,IAAI,IAAI,CAACI,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAACD,IAAI,GAAG,IAAI,CAACA,IAAI;IAChC;IAEA,IAAI,IAAI,CAACA,IAAI,EAAE;MACb,IAAI,CAACA,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACA,QAAQ;IACpC;;IAEA;IACA,IAAMM,QAAQ,GAAG,IAAI,CAACP,IAAI;;IAE1B;IACA,IAAI,CAACA,IAAI,GAAGU,IAAI,GAAG,IAAI,GAAGH,QAAQ;IAClC,IAAI,CAACN,QAAQ,GAAG,IAAI;IAEpB,OAAOM,QAAQ;EACjB;AACF;AAAC"}