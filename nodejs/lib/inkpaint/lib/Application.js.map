{"version":3,"file":"Application.js","names":["Application","constructor","options","arg2","arg3","arg4","arg5","Object","assign","width","height","settings","RENDER_OPTIONS","useGL","sharedTicker","_options","autoStart","sharedLoader","autoRender","renderer","autoRenderer","stage","Container","isStage","_ticker","ticker","shared","Ticker","start","remove","render","add","UPDATE_PRIORITY","LOW","stop","view","screen","destroyChildren","destroy","removeView","stageOptions","oldTicker"],"sources":["../src/Application.js"],"sourcesContent":["import settings from \"./settings\";\nimport Container from \"./display/Container\";\nimport { autoRenderer } from \"./autoRenderer\";\nimport { shared, Ticker } from \"./ticker\";\nimport { UPDATE_PRIORITY } from \"./const\";\n\nexport default class Application {\n  constructor(options, arg2, arg3, arg4, arg5) {\n    if (typeof options === \"number\") {\n      options = Object.assign(\n        {\n          width: options,\n          height: arg2 || settings.RENDER_OPTIONS.height,\n          useGL: !!arg4,\n          sharedTicker: !!arg5,\n        },\n        arg3\n      );\n    }\n\n    this._options = options = Object.assign(\n      {\n        autoStart: true,\n        sharedTicker: false,\n        useGL: false,\n        sharedLoader: false,\n        autoRender: false,\n      },\n      options\n    );\n\n    this.renderer = autoRenderer(options);\n    this.stage = new Container();\n    this.stage.isStage = true;\n\n    this._ticker = null;\n    if (options.autoRender) {\n      this.ticker = options.sharedTicker ? shared : new Ticker();\n    }\n\n    if (options.autoStart) {\n      this.start();\n    }\n  }\n\n  set ticker(ticker) {\n    if (this._ticker) this._ticker.remove(this.render, this);\n    this._ticker = ticker;\n\n    if (ticker) ticker.add(this.render, this, UPDATE_PRIORITY.LOW);\n  }\n\n  get ticker() {\n    return this._ticker;\n  }\n\n  render() {\n    this.renderer.render(this.stage);\n  }\n\n  stop() {\n    this.ticker && this.ticker.stop();\n  }\n\n  start() {\n    this.ticker && this.ticker.start();\n  }\n\n  get view() {\n    return this.renderer.view;\n  }\n\n  get screen() {\n    return this.renderer.screen;\n  }\n\n  destroyChildren(options) {\n    this.stage.destroyChildren(options);\n  }\n\n  destroy(removeView, stageOptions) {\n    if (this._ticker) {\n      const oldTicker = this._ticker;\n      this.ticker = null;\n      oldTicker.destroy();\n    }\n\n    this.stage.destroy(stageOptions);\n    this.renderer.destroy(removeView);\n\n    this.renderer = null;\n    this._options = null;\n    this.stage = null;\n  }\n}\n"],"mappings":"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"}