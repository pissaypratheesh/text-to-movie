{"version":3,"file":"requestAnimationFrame.js","names":["ONE_FRAME_TIME","Date","now","prototype","getTime","global","performance","startTime","lastTime","vendors","x","length","requestAnimationFrame","p","cancelAnimationFrame","callback","TypeError","currentTime","delay","setTimeout","id","clearTimeout"],"sources":["../../src/polyfill/requestAnimationFrame.js"],"sourcesContent":["const ONE_FRAME_TIME = 16;\n\n// Date.now\nif (!(Date.now && Date.prototype.getTime)) {\n  Date.now = function now() {\n    return new Date().getTime();\n  };\n}\n\n// performance.now\nif (!(global.performance && global.performance.now)) {\n  const startTime = Date.now();\n\n  if (!global.performance) {\n    global.performance = {};\n  }\n\n  global.performance.now = () => Date.now() - startTime;\n}\n\n// requestAnimationFrame\nlet lastTime = Date.now();\nconst vendors = [\"ms\", \"moz\", \"webkit\", \"o\"];\n\nfor (let x = 0; x < vendors.length && !global.requestAnimationFrame; ++x) {\n  const p = vendors[x];\n\n  global.requestAnimationFrame = global[`${p}RequestAnimationFrame`];\n  global.cancelAnimationFrame =\n    global[`${p}CancelAnimationFrame`] ||\n    global[`${p}CancelRequestAnimationFrame`];\n}\n\nif (!global.requestAnimationFrame) {\n  global.requestAnimationFrame = callback => {\n    if (typeof callback !== \"function\") {\n      throw new TypeError(`${callback}is not a function`);\n    }\n\n    const currentTime = Date.now();\n    let delay = ONE_FRAME_TIME + lastTime - currentTime;\n\n    if (delay < 0) {\n      delay = 0;\n    }\n\n    lastTime = currentTime;\n\n    return setTimeout(() => {\n      lastTime = Date.now();\n      callback(performance.now());\n    }, delay);\n  };\n}\n\nif (!global.cancelAnimationFrame) {\n  global.cancelAnimationFrame = id => clearTimeout(id);\n}\n"],"mappings":";;AAAA,IAAMA,cAAc,GAAG,EAAE;;AAEzB;AACA,IAAI,EAAEC,IAAI,CAACC,GAAG,IAAID,IAAI,CAACE,SAAS,CAACC,OAAO,CAAC,EAAE;EACzCH,IAAI,CAACC,GAAG,GAAG,SAASA,GAAG,GAAG;IACxB,OAAO,IAAID,IAAI,EAAE,CAACG,OAAO,EAAE;EAC7B,CAAC;AACH;;AAEA;AACA,IAAI,EAAEC,MAAM,CAACC,WAAW,IAAID,MAAM,CAACC,WAAW,CAACJ,GAAG,CAAC,EAAE;EACnD,IAAMK,SAAS,GAAGN,IAAI,CAACC,GAAG,EAAE;EAE5B,IAAI,CAACG,MAAM,CAACC,WAAW,EAAE;IACvBD,MAAM,CAACC,WAAW,GAAG,CAAC,CAAC;EACzB;EAEAD,MAAM,CAACC,WAAW,CAACJ,GAAG,GAAG,MAAMD,IAAI,CAACC,GAAG,EAAE,GAAGK,SAAS;AACvD;;AAEA;AACA,IAAIC,QAAQ,GAAGP,IAAI,CAACC,GAAG,EAAE;AACzB,IAAMO,OAAO,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,CAAC;AAE5C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,OAAO,CAACE,MAAM,IAAI,CAACN,MAAM,CAACO,qBAAqB,EAAE,EAAEF,CAAC,EAAE;EACxE,IAAMG,CAAC,GAAGJ,OAAO,CAACC,CAAC,CAAC;EAEpBL,MAAM,CAACO,qBAAqB,GAAGP,MAAM,CAAIQ,CAAC,2BAAwB;EAClER,MAAM,CAACS,oBAAoB,GACzBT,MAAM,CAAIQ,CAAC,0BAAuB,IAClCR,MAAM,CAAIQ,CAAC,iCAA8B;AAC7C;AAEA,IAAI,CAACR,MAAM,CAACO,qBAAqB,EAAE;EACjCP,MAAM,CAACO,qBAAqB,GAAGG,QAAQ,IAAI;IACzC,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;MAClC,MAAM,IAAIC,SAAS,CAAID,QAAQ,uBAAoB;IACrD;IAEA,IAAME,WAAW,GAAGhB,IAAI,CAACC,GAAG,EAAE;IAC9B,IAAIgB,KAAK,GAAGlB,cAAc,GAAGQ,QAAQ,GAAGS,WAAW;IAEnD,IAAIC,KAAK,GAAG,CAAC,EAAE;MACbA,KAAK,GAAG,CAAC;IACX;IAEAV,QAAQ,GAAGS,WAAW;IAEtB,OAAOE,UAAU,CAAC,MAAM;MACtBX,QAAQ,GAAGP,IAAI,CAACC,GAAG,EAAE;MACrBa,QAAQ,CAACT,WAAW,CAACJ,GAAG,EAAE,CAAC;IAC7B,CAAC,EAAEgB,KAAK,CAAC;EACX,CAAC;AACH;AAEA,IAAI,CAACb,MAAM,CAACS,oBAAoB,EAAE;EAChCT,MAAM,CAACS,oBAAoB,GAAGM,EAAE,IAAIC,YAAY,CAACD,EAAE,CAAC;AACtD"}