{"version":3,"file":"TextStyle.js","names":["defaultStyle","align","breakWords","dropShadow","dropShadowAlpha","dropShadowAngle","Math","PI","dropShadowBlur","dropShadowColor","dropShadowDistance","fill","fillGradientType","TEXT_GRADIENT","LINEAR_VERTICAL","fillGradientStops","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","letterSpacing","lineHeight","lineJoin","miterLimit","padding","stroke","strokeThickness","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","leading","genericFontFamilies","TextStyle","constructor","style","styleID","reset","deepCopyProperties","clone","clonedProperties","_align","_breakWords","_dropShadow","_dropShadowAlpha","_dropShadowAngle","_dropShadowBlur","_dropShadowColor","outputColor","getColor","_dropShadowDistance","_fill","_fillGradientType","_fillGradientStops","areArraysEqual","_fontFamily","_fontSize","_fontStyle","_fontVariant","_fontWeight","_letterSpacing","_lineHeight","_leading","_lineJoin","_miterLimit","_padding","_stroke","_strokeThickness","_textBaseline","_trim","_whiteSpace","_wordWrap","_wordWrapWidth","toFontString","fontSizeString","fontFamilies","Array","isArray","split","i","length","test","indexOf","join","getSingleColor","color","hex2string","replace","array1","array2","target","source","propertyObj","prop","slice"],"sources":["../../src/text/TextStyle.js"],"sourcesContent":["import { TEXT_GRADIENT } from \"../const\";\nimport { hex2string } from \"../utils\";\n\nconst defaultStyle = {\n  align: \"left\",\n  breakWords: false,\n  dropShadow: false,\n  dropShadowAlpha: 1,\n  dropShadowAngle: Math.PI / 6,\n  dropShadowBlur: 0,\n  dropShadowColor: \"black\",\n  dropShadowDistance: 5,\n  fill: \"black\",\n  fillGradientType: TEXT_GRADIENT.LINEAR_VERTICAL,\n  fillGradientStops: [],\n  fontFamily: [\"Helvetica\", \"Arial\", \"sans-serif\"], //\n  fontSize: 26,\n  fontStyle: \"normal\",\n  fontVariant: \"normal\",\n  fontWeight: \"normal\",\n  letterSpacing: 0,\n  lineHeight: 0,\n  lineJoin: \"miter\",\n  miterLimit: 10,\n  padding: 0,\n  stroke: \"black\",\n  strokeThickness: 0,\n  textBaseline: \"alphabetic\",\n  trim: false,\n  whiteSpace: \"pre\",\n  wordWrap: false,\n  wordWrapWidth: 100,\n  leading: 0\n};\n\nconst genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n];\n\nexport default class TextStyle {\n  constructor(style) {\n    this.styleID = 0;\n    this.reset();\n    deepCopyProperties(this, style, style);\n  }\n\n  clone() {\n    const clonedProperties = {};\n    deepCopyProperties(clonedProperties, this, defaultStyle);\n    return new TextStyle(clonedProperties);\n  }\n\n  reset() {\n    deepCopyProperties(this, defaultStyle, defaultStyle);\n  }\n\n  get align() {\n    return this._align;\n  }\n\n  set align(align) {\n    if (this._align !== align) {\n      this._align = align;\n      this.styleID++;\n    }\n  }\n\n  get breakWords() {\n    return this._breakWords;\n  }\n\n  set breakWords(breakWords) {\n    if (this._breakWords !== breakWords) {\n      this._breakWords = breakWords;\n      this.styleID++;\n    }\n  }\n\n  get dropShadow() {\n    return this._dropShadow;\n  }\n  set dropShadow(dropShadow) {\n    if (this._dropShadow !== dropShadow) {\n      this._dropShadow = dropShadow;\n      this.styleID++;\n    }\n  }\n\n  get dropShadowAlpha() {\n    return this._dropShadowAlpha;\n  }\n\n  set dropShadowAlpha(dropShadowAlpha) {\n    if (this._dropShadowAlpha !== dropShadowAlpha) {\n      this._dropShadowAlpha = dropShadowAlpha;\n      this.styleID++;\n    }\n  }\n\n  get dropShadowAngle() {\n    return this._dropShadowAngle;\n  }\n  set dropShadowAngle(dropShadowAngle) {\n    if (this._dropShadowAngle !== dropShadowAngle) {\n      this._dropShadowAngle = dropShadowAngle;\n      this.styleID++;\n    }\n  }\n\n  get dropShadowBlur() {\n    return this._dropShadowBlur;\n  }\n  set dropShadowBlur(dropShadowBlur) {\n    if (this._dropShadowBlur !== dropShadowBlur) {\n      this._dropShadowBlur = dropShadowBlur;\n      this.styleID++;\n    }\n  }\n\n  get dropShadowColor() {\n    return this._dropShadowColor;\n  }\n  set dropShadowColor(dropShadowColor) {\n    const outputColor = getColor(dropShadowColor);\n    if (this._dropShadowColor !== outputColor) {\n      this._dropShadowColor = outputColor;\n      this.styleID++;\n    }\n  }\n\n  get dropShadowDistance() {\n    return this._dropShadowDistance;\n  }\n  set dropShadowDistance(dropShadowDistance) {\n    if (this._dropShadowDistance !== dropShadowDistance) {\n      this._dropShadowDistance = dropShadowDistance;\n      this.styleID++;\n    }\n  }\n\n  get fill() {\n    return this._fill;\n  }\n  set fill(fill) {\n    const outputColor = getColor(fill);\n    if (this._fill !== outputColor) {\n      this._fill = outputColor;\n      this.styleID++;\n    }\n  }\n\n  get fillGradientType() {\n    return this._fillGradientType;\n  }\n  set fillGradientType(fillGradientType) {\n    if (this._fillGradientType !== fillGradientType) {\n      this._fillGradientType = fillGradientType;\n      this.styleID++;\n    }\n  }\n\n  get fillGradientStops() {\n    return this._fillGradientStops;\n  }\n  set fillGradientStops(fillGradientStops) {\n    if (!areArraysEqual(this._fillGradientStops, fillGradientStops)) {\n      this._fillGradientStops = fillGradientStops;\n      this.styleID++;\n    }\n  }\n\n  get fontFamily() {\n    return this._fontFamily;\n  }\n  set fontFamily(fontFamily) {\n    if (this.fontFamily !== fontFamily) {\n      this._fontFamily = fontFamily;\n      this.styleID++;\n    }\n  }\n\n  get fontSize() {\n    return this._fontSize;\n  }\n  set fontSize(fontSize) {\n    if (this._fontSize !== fontSize) {\n      this._fontSize = fontSize;\n      this.styleID++;\n    }\n  }\n\n  get fontStyle() {\n    return this._fontStyle;\n  }\n  set fontStyle(fontStyle) {\n    if (this._fontStyle !== fontStyle) {\n      this._fontStyle = fontStyle;\n      this.styleID++;\n    }\n  }\n\n  get fontVariant() {\n    return this._fontVariant;\n  }\n  set fontVariant(fontVariant) {\n    if (this._fontVariant !== fontVariant) {\n      this._fontVariant = fontVariant;\n      this.styleID++;\n    }\n  }\n\n  get fontWeight() {\n    return this._fontWeight;\n  }\n  set fontWeight(fontWeight) {\n    if (this._fontWeight !== fontWeight) {\n      this._fontWeight = fontWeight;\n      this.styleID++;\n    }\n  }\n\n  get letterSpacing() {\n    return this._letterSpacing;\n  }\n  set letterSpacing(letterSpacing) {\n    if (this._letterSpacing !== letterSpacing) {\n      this._letterSpacing = letterSpacing;\n      this.styleID++;\n    }\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n  set lineHeight(lineHeight) {\n    if (this._lineHeight !== lineHeight) {\n      this._lineHeight = lineHeight;\n      this.styleID++;\n    }\n  }\n\n  get leading() {\n    return this._leading;\n  }\n  set leading(leading) {\n    if (this._leading !== leading) {\n      this._leading = leading;\n      this.styleID++;\n    }\n  }\n\n  get lineJoin() {\n    return this._lineJoin;\n  }\n  set lineJoin(lineJoin) {\n    if (this._lineJoin !== lineJoin) {\n      this._lineJoin = lineJoin;\n      this.styleID++;\n    }\n  }\n\n  get miterLimit() {\n    return this._miterLimit;\n  }\n  set miterLimit(miterLimit) {\n    if (this._miterLimit !== miterLimit) {\n      this._miterLimit = miterLimit;\n      this.styleID++;\n    }\n  }\n\n  get padding() {\n    return this._padding;\n  }\n  set padding(padding) {\n    if (this._padding !== padding) {\n      this._padding = padding;\n      this.styleID++;\n    }\n  }\n\n  get stroke() {\n    return this._stroke;\n  }\n  set stroke(stroke) {\n    const outputColor = getColor(stroke);\n    if (this._stroke !== outputColor) {\n      this._stroke = outputColor;\n      this.styleID++;\n    }\n  }\n\n  get strokeThickness() {\n    return this._strokeThickness;\n  }\n  set strokeThickness(strokeThickness) {\n    if (this._strokeThickness !== strokeThickness) {\n      this._strokeThickness = strokeThickness;\n      this.styleID++;\n    }\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n  set textBaseline(textBaseline) {\n    if (this._textBaseline !== textBaseline) {\n      this._textBaseline = textBaseline;\n      this.styleID++;\n    }\n  }\n\n  get trim() {\n    return this._trim;\n  }\n  set trim(trim) {\n    if (this._trim !== trim) {\n      this._trim = trim;\n      this.styleID++;\n    }\n  }\n\n  get whiteSpace() {\n    return this._whiteSpace;\n  }\n  set whiteSpace(whiteSpace) {\n    if (this._whiteSpace !== whiteSpace) {\n      this._whiteSpace = whiteSpace;\n      this.styleID++;\n    }\n  }\n\n  get wordWrap() {\n    return this._wordWrap;\n  }\n  set wordWrap(wordWrap) {\n    if (this._wordWrap !== wordWrap) {\n      this._wordWrap = wordWrap;\n      this.styleID++;\n    }\n  }\n\n  get wordWrapWidth() {\n    return this._wordWrapWidth;\n  }\n  set wordWrapWidth(wordWrapWidth) {\n    if (this._wordWrapWidth !== wordWrapWidth) {\n      this._wordWrapWidth = wordWrapWidth;\n      this.styleID++;\n    }\n  }\n\n  toFontString() {\n    // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n    const fontSizeString =\n      typeof this.fontSize === \"number\" ? `${this.fontSize}px` : this.fontSize;\n\n    let fontFamilies = this.fontFamily;\n    if (!Array.isArray(this.fontFamily)) {\n      fontFamilies = this.fontFamily.split(\",\");\n    }\n\n    for (let i = fontFamilies.length - 1; i >= 0; i--) {\n      let fontFamily = fontFamilies[i].trim();\n\n      if (\n        !/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontFamily) &&\n        genericFontFamilies.indexOf(fontFamily) < 0\n      ) {\n        fontFamily = `\"${fontFamily}\"`;\n      }\n\n      fontFamilies[i] = fontFamily;\n    }\n\n    return `${this.fontStyle} ${this.fontVariant} ${\n      this.fontWeight\n    } ${fontSizeString} ${fontFamilies.join(\",\")}`;\n  }\n}\n\nfunction getSingleColor(color) {\n  if (typeof color === \"number\") {\n    return hex2string(color);\n  } else if (typeof color === \"string\") {\n    if (color.indexOf(\"0x\") === 0) {\n      color = color.replace(\"0x\", \"#\");\n    }\n  }\n\n  return color;\n}\n\nfunction getColor(color) {\n  if (!Array.isArray(color)) return getSingleColor(color);\n\n  for (let i = 0; i < color.length; ++i) {\n    color[i] = getSingleColor(color[i]);\n  }\n  return color;\n}\n\nfunction areArraysEqual(array1, array2) {\n  if (!Array.isArray(array1) || !Array.isArray(array2)) {\n    return false;\n  }\n\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction deepCopyProperties(target, source, propertyObj) {\n  for (const prop in propertyObj) {\n    if (Array.isArray(source[prop])) {\n      target[prop] = source[prop].slice();\n    } else {\n      target[prop] = source[prop];\n    }\n  }\n}\n"],"mappings":"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"}