{"version":3,"file":"trimCanvas.js","names":["trimCanvas","canvas","width","height","context","getContext","imageData","getImageData","pixels","data","len","length","bound","top","left","right","bottom","i","x","y"],"sources":["../../src/utils/trimCanvas.js"],"sourcesContent":["export default function trimCanvas(canvas) {\n  let width = canvas.width;\n  let height = canvas.height;\n\n  const context = canvas.getContext(\"2d\");\n  const imageData = context.getImageData(0, 0, width, height);\n  const pixels = imageData.data;\n  const len = pixels.length;\n\n  const bound = {\n    top: null,\n    left: null,\n    right: null,\n    bottom: null\n  };\n  let data = null;\n  let i;\n  let x;\n  let y;\n\n  for (i = 0; i < len; i += 4) {\n    if (pixels[i + 3] !== 0) {\n      x = (i / 4) % width;\n      y = ~~(i / 4 / width);\n\n      if (bound.top === null) {\n        bound.top = y;\n      }\n\n      if (bound.left === null) {\n        bound.left = x;\n      } else if (x < bound.left) {\n        bound.left = x;\n      }\n\n      if (bound.right === null) {\n        bound.right = x + 1;\n      } else if (bound.right < x) {\n        bound.right = x + 1;\n      }\n\n      if (bound.bottom === null) {\n        bound.bottom = y;\n      } else if (bound.bottom < y) {\n        bound.bottom = y;\n      }\n    }\n  }\n\n  if (bound.top !== null) {\n    width = bound.right - bound.left;\n    height = bound.bottom - bound.top + 1;\n    data = context.getImageData(bound.left, bound.top, width, height);\n  }\n\n  return {\n    height,\n    width,\n    data\n  };\n}\n"],"mappings":";;;;;;AAAe,SAASA,UAAU,CAACC,MAAM,EAAE;EACzC,IAAIC,KAAK,GAAGD,MAAM,CAACC,KAAK;EACxB,IAAIC,MAAM,GAAGF,MAAM,CAACE,MAAM;EAE1B,IAAMC,OAAO,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;EACvC,IAAMC,SAAS,GAAGF,OAAO,CAACG,YAAY,CAAC,CAAC,EAAE,CAAC,EAAEL,KAAK,EAAEC,MAAM,CAAC;EAC3D,IAAMK,MAAM,GAAGF,SAAS,CAACG,IAAI;EAC7B,IAAMC,GAAG,GAAGF,MAAM,CAACG,MAAM;EAEzB,IAAMC,KAAK,GAAG;IACZC,GAAG,EAAE,IAAI;IACTC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC;EACD,IAAIP,IAAI,GAAG,IAAI;EACf,IAAIQ,CAAC;EACL,IAAIC,CAAC;EACL,IAAIC,CAAC;EAEL,KAAKF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,GAAG,EAAEO,CAAC,IAAI,CAAC,EAAE;IAC3B,IAAIT,MAAM,CAACS,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,EAAE;MACvBC,CAAC,GAAID,CAAC,GAAG,CAAC,GAAIf,KAAK;MACnBiB,CAAC,GAAG,CAAC,EAAEF,CAAC,GAAG,CAAC,GAAGf,KAAK,CAAC;MAErB,IAAIU,KAAK,CAACC,GAAG,KAAK,IAAI,EAAE;QACtBD,KAAK,CAACC,GAAG,GAAGM,CAAC;MACf;MAEA,IAAIP,KAAK,CAACE,IAAI,KAAK,IAAI,EAAE;QACvBF,KAAK,CAACE,IAAI,GAAGI,CAAC;MAChB,CAAC,MAAM,IAAIA,CAAC,GAAGN,KAAK,CAACE,IAAI,EAAE;QACzBF,KAAK,CAACE,IAAI,GAAGI,CAAC;MAChB;MAEA,IAAIN,KAAK,CAACG,KAAK,KAAK,IAAI,EAAE;QACxBH,KAAK,CAACG,KAAK,GAAGG,CAAC,GAAG,CAAC;MACrB,CAAC,MAAM,IAAIN,KAAK,CAACG,KAAK,GAAGG,CAAC,EAAE;QAC1BN,KAAK,CAACG,KAAK,GAAGG,CAAC,GAAG,CAAC;MACrB;MAEA,IAAIN,KAAK,CAACI,MAAM,KAAK,IAAI,EAAE;QACzBJ,KAAK,CAACI,MAAM,GAAGG,CAAC;MAClB,CAAC,MAAM,IAAIP,KAAK,CAACI,MAAM,GAAGG,CAAC,EAAE;QAC3BP,KAAK,CAACI,MAAM,GAAGG,CAAC;MAClB;IACF;EACF;EAEA,IAAIP,KAAK,CAACC,GAAG,KAAK,IAAI,EAAE;IACtBX,KAAK,GAAGU,KAAK,CAACG,KAAK,GAAGH,KAAK,CAACE,IAAI;IAChCX,MAAM,GAAGS,KAAK,CAACI,MAAM,GAAGJ,KAAK,CAACC,GAAG,GAAG,CAAC;IACrCJ,IAAI,GAAGL,OAAO,CAACG,YAAY,CAACK,KAAK,CAACE,IAAI,EAAEF,KAAK,CAACC,GAAG,EAAEX,KAAK,EAAEC,MAAM,CAAC;EACnE;EAEA,OAAO;IACLA,MAAM;IACND,KAAK;IACLO;EACF,CAAC;AACH"}