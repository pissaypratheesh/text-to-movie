{"version":3,"file":"loader.js","names":["Loader","ResourceLoader","constructor","baseUrl","concurrency","EventEmitter","call","i","_pixiMiddleware","length","use","onStart","add","l","emit","onLoad","r","onProgress","onError","e","onComplete","addPixiMiddleware","fn","push","destroy","removeAllListeners","inherit","textureParser","spritesheetParser"],"sources":["../../src/loaders/loader.js"],"sourcesContent":["import EventEmitter from \"eventemitter3\";\nimport textureParser from \"./textureParser\";\nimport { inherit } from \"../utils\";\nimport { Resource, ResourceLoader } from \"../resource\";\nimport spritesheetParser from \"./spritesheetParser\";\n\nexport default class Loader extends ResourceLoader {\n  constructor(baseUrl, concurrency) {\n    super(baseUrl, concurrency);\n    EventEmitter.call(this);\n\n    for (let i = 0; i < Loader._pixiMiddleware.length; ++i) {\n      this.use(Loader._pixiMiddleware[i]());\n    }\n\n    this.onStart.add(l => this.emit(\"start\", l));\n    this.onLoad.add((l, r) => this.emit(\"load\", l, r));\n    this.onProgress.add((l, r) => this.emit(\"progress\", l, r));\n    this.onError.add((e, l, r) => this.emit(\"error\", e, l, r));\n    this.onComplete.add((l, r) => this.emit(\"complete\", l, r));\n  }\n\n  static addPixiMiddleware(fn) {\n    Loader._pixiMiddleware.push(fn);\n  }\n\n  destroy() {\n    this.removeAllListeners();\n    super.destroy();\n  }\n}\n\ninherit(Loader, EventEmitter);\nLoader._pixiMiddleware = [textureParser, spritesheetParser];\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AAAoD;AAErC,MAAMA,MAAM,SAASC,wBAAc,CAAC;EACjDC,WAAW,CAACC,OAAO,EAAEC,WAAW,EAAE;IAChC,KAAK,CAACD,OAAO,EAAEC,WAAW,CAAC;IAC3BC,qBAAY,CAACC,IAAI,CAAC,IAAI,CAAC;IAEvB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,MAAM,CAACQ,eAAe,CAACC,MAAM,EAAE,EAAEF,CAAC,EAAE;MACtD,IAAI,CAACG,GAAG,CAACV,MAAM,CAACQ,eAAe,CAACD,CAAC,CAAC,EAAE,CAAC;IACvC;IAEA,IAAI,CAACI,OAAO,CAACC,GAAG,CAACC,CAAC,IAAI,IAAI,CAACC,IAAI,CAAC,OAAO,EAAED,CAAC,CAAC,CAAC;IAC5C,IAAI,CAACE,MAAM,CAACH,GAAG,CAAC,CAACC,CAAC,EAAEG,CAAC,KAAK,IAAI,CAACF,IAAI,CAAC,MAAM,EAAED,CAAC,EAAEG,CAAC,CAAC,CAAC;IAClD,IAAI,CAACC,UAAU,CAACL,GAAG,CAAC,CAACC,CAAC,EAAEG,CAAC,KAAK,IAAI,CAACF,IAAI,CAAC,UAAU,EAAED,CAAC,EAAEG,CAAC,CAAC,CAAC;IAC1D,IAAI,CAACE,OAAO,CAACN,GAAG,CAAC,CAACO,CAAC,EAAEN,CAAC,EAAEG,CAAC,KAAK,IAAI,CAACF,IAAI,CAAC,OAAO,EAAEK,CAAC,EAAEN,CAAC,EAAEG,CAAC,CAAC,CAAC;IAC1D,IAAI,CAACI,UAAU,CAACR,GAAG,CAAC,CAACC,CAAC,EAAEG,CAAC,KAAK,IAAI,CAACF,IAAI,CAAC,UAAU,EAAED,CAAC,EAAEG,CAAC,CAAC,CAAC;EAC5D;EAEA,OAAOK,iBAAiB,CAACC,EAAE,EAAE;IAC3BtB,MAAM,CAACQ,eAAe,CAACe,IAAI,CAACD,EAAE,CAAC;EACjC;EAEAE,OAAO,GAAG;IACR,IAAI,CAACC,kBAAkB,EAAE;IACzB,KAAK,CAACD,OAAO,EAAE;EACjB;AACF;AAAC;AAED,IAAAE,cAAO,EAAC1B,MAAM,EAAEK,qBAAY,CAAC;AAC7BL,MAAM,CAACQ,eAAe,GAAG,CAACmB,sBAAa,EAAEC,0BAAiB,CAAC"}